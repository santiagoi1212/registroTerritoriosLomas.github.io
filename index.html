<!DOCTYPE html>
<html lang="es">
  <head>
<script>
// Early global helpers to ensure availability before any calls
window.normalizarId = window.normalizarId || function normalizarId(x) {
  let s = String(x ?? "")
    .normalize("NFKC")
    .replace(/[\u200B\u200C\u200D\u2060\uFEFF]/g, "")
    .replace(/[\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/g, " ")
    .replace(/\s+/g, " ")
    .trim();

  if (!s) return "";

  const stripZeros = (v) => v.replace(/^0+/, "") || "0";

  if (/^\d+$/.test(s)) return stripZeros(s);

  let m = s.match(/(\d+)\s*$/);
  if (m) return stripZeros(m[1]);

  if (s.includes("|")) {
    const right = s.split("|").pop();
    m = right.match(/(\d+)(?!.*\d)/);
    if (m) return stripZeros(m[1]);
  }

  const all = s.match(/\d+/g);
  if (all && all.length) return stripZeros(all[all.length - 1]);

  return s;
};

window.idKey = window.idKey || function idKey(x){ return window.normalizarId(x); };
</script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Territorios Lomas de Solymar</title>

    <!-- Leaflet -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- (Opcional) Leaflet.Draw CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"
    />

    <style>
      #map {
        height: 900px;
        width: 100%;
      }
      #info-panel {
        position: fixed;
        width: 10%;
        top: 50%;
        left: 50px;
        height: 10%;
        overflow-y: auto;
        background: rgba(0, 0, 0, 0.8);
        color: #fff;
        padding: 15px;
        border-radius: 10px;
        font-family: Arial, sans-serif;
        box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        z-index: 1000;
        visibility: hidden;
      }
      .label {
        font-size: 14px;
        font-weight: bold;
        background: #fff;
        padding: 2px;
        border-radius: 5px;
      }
      .tooltip-content {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .hidden {
        display: none;
      }

      #ranking-container,
      #contador-poligonos {
        position: fixed;
        background: rgba(0, 0, 0, 0.8);
        color: #fff;
        padding: 15px;
        border-radius: 10px;
        font-family: Arial, sans-serif;
        box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        z-index: 1000;
        visibility: hidden;
      }
      #referencias {
        top: 10px;
        left: 50px;
        width: 250px;
        max-height: 400px;
        overflow-y: auto;
        position: fixed;
        background: rgba(0, 0, 0, 0.8);
        color: #fff;
        padding: 15px;
        border-radius: 10px;
        font-family: Arial, sans-serif;
        box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        z-index: 1000;
      }
      #ranking-container {
        top: 10px;
        right: 10px;
        width: 250px;
        max-height: 400px;
        overflow-y: auto;
      }
      #contador-poligonos {
        bottom: 10px;
        right: 10px;
        width: 250px;
        max-height: 400px;
        overflow-y: auto;
      }

      .referencias {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 0;
      }
      .referencia {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .color-box {
        width: 20px;
        height: 20px;
        border: 1px solid #000;
      }
      .azul {
        background: rgb(9, 0, 128);
      }
      .verde {
        background: green;
      }
      .amarillo {
        background: yellow;
      }
      .rojo {
        background: red;
      }

      .bordo {
        background: rgb(114, 3, 3);
      }

      #ranking-container h3 {
        font-size: 16px;
        margin-bottom: 10px;
        text-align: center;
        border-bottom: 1px solid #fff;
        padding-bottom: 5px;
      }
      #ranking-container ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      #ranking-container li {
        font-size: 14px;
        margin: 5px 0;
      }
       #toggle-referencias {
        position: fixed;
        bottom: 80px;
        left: 10px;
        padding: 10px 15px;
        background: #000;
        color: #fff;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        z-index: 1100;
        display: none; /* Oculto por defecto */
      }

      /*=== Estilo Responsivo=== */
      @media (max-width: 768px) {
        #referencias,
        #ranking-container,
        #contador-poligonos,
        #info-panel {
          display: none;
        }

        #referencias {
          right: 10px;
          font-size: 10px;
          width: 150px;
          top: 10px;
          left: auto;
        }
        .color-box {
          width: 10px;
          height: 10px;
        }

        #ranking-container {
          width: 150px;
          top: 180px;
        }
        #ranking-container li {
          font-size: 10px;
          margin: 4px 0;
        }

        #info-panel {
          width: 150px;
          right: 10px;
          top: 590px;
          height: auto;
          font-size: 10px;
        }

        #contador-poligonos {
          width: 150px;
          font-size: 10px;
          top: 680px;
        }

        #toggle-referencias {
          display: block;
          top: 100px;
          height: 50px;
        }

        /* Animaci칩n de escala */
        @keyframes scaleDown {
          0% {
            transform: scale(1);
          }
          50% {
            transform: scale(0.9);
          }
          100% {
            transform: scale(1);
          }
        }

        #toggle-referencias.animate {
          animation: scaleDown 200ms ease-in-out;
        }
      }
    </style>
  </head>
  <body>
    <div id="map"></div>

    <div id="info-panel">
      <p><strong>Territorio:</strong> <span id="polygon-id"></span></p>
      <p><strong>칔ltima visita:</strong> <span id="polygon-fecha"></span></p>
    </div>

    <div id="referencias">
      <h3 style="margin-top: 0">Referencias</h3>
      <div class="referencias">
        <div class="referencia">
          <div class="color-box azul"></div>
          <span>Se est치 trabajando</span>
        </div>
        <div class="referencia">
          <div class="color-box verde"></div>
          <span>Se realiz칩 1 vez</span>
        </div>
        <div class="referencia">
          <div class="color-box amarillo"></div>
          <span>Se realiz칩 2 veces</span>
        </div>
        <div class="referencia">
          <div class="color-box rojo"></div>
          <span>Se realiz칩 3 veces</span>
        </div>
        <div class="referencia">
          <div class="color-box bordo"></div>
          <span>Se realiz칩 m치s de 3 veces</span>
        </div>
      </div>
    </div>

    <div id="contador-poligonos">
      <h3>Estado de territorios</h3>
      <p>Trabajando: <span id="contador-azul">0</span></p>
      <p>Realizados: <span id="contador-verde">0</span></p>
      <p>Realizar: <span id="contador-amarillo">0</span></p>
      <p>Urgentes: <span id="contador-rojo">0</span></p>
    </div>

    <div id="ranking-container"></div>
    <button id="toggle-referencias">游늶 Ver Informaci칩n</button>
    <script>
      /*************** CONFIG ***************/
      //const SHEET_CSV =
      //  "https://docs.google.com/spreadsheets/d/e/2PACX-1vRnjPtaFTh49d_U3mD8kNr6_YoXZoUL5d5Ah11E2FcAMjrHtSyJkH6Q6p0seJyp3JOa6iK2F8ODpxrf/pub?gid=1159469350&single=true&output=csv";
      const SHEET_CSV =  
        "https://docs.google.com/spreadsheets/d/e/2PACX-1vRnjPtaFTh49d_U3mD8kNr6_YoXZoUL5d5Ah11E2FcAMjrHtSyJkH6Q6p0seJyp3JOa6iK2F8ODpxrf/pub?gid=1159469350&single=true&output=csv"  
      const N_RANK = 20;
      let contadores = { blue: 0, green: 0, yellow: 0, red: 0 };

      /*************** MAPA ***************/
      const map = L.map("map").setView([-34.77118, -55.826602], 17);
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "&copy; OpenStreetMap contributors",
      }).addTo(map);

      

// ======== L칈NEAS EN EL MAPA (Leaflet) ========
// Capa contenedora (si ya existe, reutiliza)
window.capaLineas = window.capaLineas || L.layerGroup().addTo(map);

// Agregar una l칤nea r치pidamente desde un array de [lat, lng]
window.agregarLinea = function agregarLinea(coords, options = {}) {
  const linea = L.polyline(coords, {
    color: options.color || '#3388ff',
    weight: options.weight || 4,
    opacity: options.opacity ?? 0.9,
    dashArray: options.dashArray || null,
    ...options
  }).addTo(window.capaLineas);

  if (options.popup) linea.bindPopup(options.popup);
  if (options.tooltip) linea.bindTooltip(options.tooltip);
  return linea;
};

// Cargar l칤neas desde un GeoJSON (LineString/MultiLineString)
window.cargarLineasDesdeJSON = async function cargarLineasDesdeJSON(url) {
  try {
    const resp = await fetch(url);
    const data = await resp.json();

    const capa = L.geoJSON(data, {
      style: (feature) => ({
        color: feature?.properties?.color || '#ff6600',
        weight: feature?.properties?.weight || 4
      }),
      onEachFeature: (feature, layer) => {
        const props = feature.properties || {};
        if (props.name || props.descripcion) {
          const html = `<b>${props.name ?? 'L칤nea'}</b><br>${props.descripcion ?? ''}`;
          layer.bindPopup(html);
        }
      }
    });

    capa.addTo(window.capaLineas);

    // Ajustar el mapa a las l칤neas cargadas
    const bounds = capa.getBounds();
    if (bounds && bounds.isValid()) map.fitBounds(bounds.pad(0.1));
  } catch (e) {
    console.error('Error cargando l칤neas:', e);
  }
};

// Control de capas: agrega "L칤neas" para mostrar/ocultar
(function ensureControlCapasLineas(){
  if (!window._controlLayers) {
    window._controlLayers = L.control.layers({}, {}, { collapsed: false }).addTo(map);
  }
  window._controlLayers.addOverlay(window.capaLineas, 'Territorios');
})();



// Ejemplo 2: cargar desde GeoJSON local
// Dej치 el archivo lineas.geojson junto a este HTML o ajust치 la ruta
window.cargarLineasDesdeJSON('lineas.geojson');
// ==========================================

/*************** POL칈GONOS (tu dataset) ***************/
      var poligonos = [
  {
    "id": "1601",
    "territorio": "2",
    "coords": [
      [
        -34.80421,
        -55.946395
      ],
      [
        -34.805109,
        -55.944539
      ],
      [
        -34.806651,
        -55.945891
      ],
      [
        -34.805567,
        -55.947554
      ]
    ]
  },
  {
    "id": "1600",
    "territorio": "2",
    "coords": [
      [
        -34.805673,
        -55.947651
      ],
      [
        -34.806747,
        -55.945956
      ],
      [
        -34.807575,
        -55.946771
      ],
      [
        -34.806589,
        -55.948294
      ],
      [
        -34.806448,
        -55.948348
      ]
    ]
  },
  {
    "id": "10108",
    "territorio": "2",
    "coords": [
      [
        -34.805593,
        -55.944732
      ],
      [
        -34.805171,
        -55.944378
      ],
      [
        -34.806016,
        -55.942458
      ],
      [
        -34.806624,
        -55.943048
      ]
    ]
  },
  {
    "id": "10107",
    "territorio": 2,
    "coords": [
      [
        -34.80569,
        -55.944808
      ],
      [
        -34.806721,
        -55.943145
      ],
      [
        -34.80717,
        -55.943542
      ],
      [
        -34.806175,
        -55.945215
      ]
    ]
  },
  {
    "id": "10106",
    "territorio": "2",
    "coords": [
      [
        -34.806783,
        -55.944443
      ],
      [
        -34.807258,
        -55.943627
      ],
      [
        -34.807787,
        -55.94411
      ],
      [
        -34.807302,
        -55.944915
      ]
    ]
  },
  {
    "id": "10105",
    "territorio": "2",
    "coords": [
      [
        -34.807399,
        -55.944979
      ],
      [
        -34.807884,
        -55.944175
      ],
      [
        -34.80843,
        -55.944657
      ],
      [
        -34.807919,
        -55.945483
      ]
    ]
  },
  {
    "id": "1055",
    "territorio": "2",
    "coords": [
      [
        -34.806078,
        -55.942361
      ],
      [
        -34.806571,
        -55.94116
      ],
      [
        -34.807355,
        -55.941889
      ],
      [
        -34.806712,
        -55.942941
      ]
    ]
  },
  {
    "id": "10100",
    "territorio": "2",
    "coords": [
      [
        -34.80725,
        -55.943434
      ],
      [
        -34.8068,
        -55.943037
      ],
      [
        -34.807452,
        -55.941954
      ],
      [
        -34.807893,
        -55.942426
      ]
    ]
  },
  {
    "id": "10101",
    "territorio": "2",
    "coords": [
      [
        -34.807884,
        -55.943981
      ],
      [
        -34.807346,
        -55.94352
      ],
      [
        -34.807945,
        -55.942469
      ],
      [
        -34.8085,
        -55.942984
      ]
    ]
  },
  {
    "id": "10102",
    "territorio": "2",
    "coords": [
      [
        -34.807972,
        -55.944078
      ],
      [
        -34.808589,
        -55.943027
      ],
      [
        -34.809135,
        -55.943531
      ],
      [
        -34.808492,
        -55.944561
      ]
    ]
  },
  {
    "id": "10104",
    "territorio": "2",
    "coords": [
      [
        -34.80747,
        -55.946438
      ],
      [
        -34.808095,
        -55.94543
      ],
      [
        -34.80858,
        -55.946213
      ],
      [
        -34.808086,
        -55.947093
      ],
      [
        -34.807937,
        -55.946889
      ]
    ]
  },
  {
    "id": "1007|142",
    "territorio": "2",
    "coords": [
      [
        -34.808157,
        -55.945344
      ],
      [
        -34.809214,
        -55.943584
      ],
      [
        -34.809549,
        -55.943896
      ],
      [
        -34.810077,
        -55.943091
      ],
      [
        -34.810289,
        -55.943531
      ],
      [
        -34.808668,
        -55.946127
      ]
    ]
  },
  {
    "id": "1005|141",
    "territorio": "2",
    "coords": [
      [
        -34.810368,
        -55.943391
      ],
      [
        -34.810121,
        -55.943027
      ],
      [
        -34.81139,
        -55.940945
      ],
      [
        -34.811099,
        -55.940409
      ],
      [
        -34.811513,
        -55.93998
      ],
      [
        -34.811945,
        -55.940816
      ]
    ]
  },
  {
    "id": "998|135",
    "territorio": "2",
    "coords": [
      [
        -34.808725,
        -55.946234
      ],
      [
        -34.809236,
        -55.945408
      ],
      [
        -34.810183,
        -55.94712
      ],
      [
        -34.809712,
        -55.947951
      ]
    ]
  },
  {
    "id": "999|136",
    "territorio": "2",
    "coords": [
      [
        -34.810236,
        -55.947055
      ],
      [
        -34.809328,
        -55.945483
      ],
      [
        -34.810117,
        -55.945113
      ],
      [
        -34.810733,
        -55.946224
      ]
    ]
  },
  {
    "id": "1001|137",
    "territorio": "2",
    "coords": [
      [
        -34.810143,
        -55.945027
      ],
      [
        -34.809848,
        -55.944432
      ],
      [
        -34.81035,
        -55.943574
      ],
      [
        -34.811174,
        -55.945113
      ],
      [
        -34.811011,
        -55.945054
      ],
      [
        -34.810733,
        -55.944985
      ],
      [
        -34.81054,
        -55.944974
      ],
      [
        -34.810324,
        -55.94499
      ]
    ]
  },
  {
    "id": "1002|138",
    "territorio": "2",
    "coords": [
      [
        -34.811359,
        -55.945247
      ],
      [
        -34.811284,
        -55.945183
      ],
      [
        -34.81039,
        -55.943536
      ],
      [
        -34.810905,
        -55.942694
      ],
      [
        -34.81187,
        -55.944448
      ]
    ]
  },
  {
    "id": "1003|139",
    "territorio": "2",
    "coords": [
      [
        -34.811909,
        -55.944394
      ],
      [
        -34.810949,
        -55.942635
      ],
      [
        -34.811487,
        -55.941787
      ],
      [
        -34.812429,
        -55.943531
      ]
    ]
  },
  {
    "id": "1004|140",
    "territorio": "2",
    "coords": [
      [
        -34.812482,
        -55.943472
      ],
      [
        -34.811522,
        -55.941739
      ],
      [
        -34.812033,
        -55.940892
      ],
      [
        -34.813019,
        -55.942667
      ]
    ]
  },
  {
    "id": "993|134",
    "territorio": "2",
    "coords": [
      [
        -34.813742,
        -55.945939
      ],
      [
        -34.812482,
        -55.943606
      ],
      [
        -34.811954,
        -55.944459
      ],
      [
        -34.812782,
        -55.945945
      ],
      [
        -34.812896,
        -55.946063
      ],
      [
        -34.813204,
        -55.946149
      ],
      [
        -34.813451,
        -55.946154
      ]
    ]
  },
  {
    "id": "1004|140",
    "territorio": "2",
    "coords": [
      [
        -34.814482,
        -55.945349
      ],
      [
        -34.81305,
        -55.942737
      ],
      [
        -34.812522,
        -55.943531
      ],
      [
        -34.81379,
        -55.945902
      ]
    ]
  },
  {
    "id": "985|127",
    "territorio": "1",
    "coords": [
      [
        -34.810183,
        -55.948895
      ],
      [
        -34.811315,
        -55.951036
      ],
      [
        -34.812077,
        -55.950521
      ],
      [
        -34.810883,
        -55.948321
      ]
    ]
  },
  {
    "id": "986|128",
    "territorio": "1",
    "coords": [
      [
        -34.812121,
        -55.950483
      ],
      [
        -34.810932,
        -55.948294
      ],
      [
        -34.811575,
        -55.947779
      ],
      [
        -34.812671,
        -55.949721
      ],
      [
        -34.812504,
        -55.95022
      ]
    ]
  },
  {
    "id": "987|129",
    "territorio": "1",
    "coords": [
      [
        -34.811628,
        -55.947742
      ],
      [
        -34.812345,
        -55.947168
      ],
      [
        -34.8129,
        -55.948187
      ],
      [
        -34.812896,
        -55.94882
      ],
      [
        -34.812799,
        -55.949416
      ],
      [
        -34.812702,
        -55.949652
      ]
    ]
  },
  {
    "id": "989|130",
    "territorio": "2",
    "coords": [
      [
        -34.813565,
        -55.949276
      ],
      [
        -34.812949,
        -55.948144
      ],
      [
        -34.812989,
        -55.947586
      ],
      [
        -34.813081,
        -55.947055
      ],
      [
        -34.813165,
        -55.946766
      ],
      [
        -34.814231,
        -55.948734
      ]
    ]
  },
  {
    "id": "990|131",
    "territorio": "1",
    "coords": [
      [
        -34.814275,
        -55.948697
      ],
      [
        -34.813196,
        -55.946712
      ],
      [
        -34.813477,
        -55.946224
      ],
      [
        -34.81379,
        -55.945988
      ],
      [
        -34.814966,
        -55.948139
      ]
    ]
  },
  {
    "id": "991|132",
    "territorio": "1",
    "coords": [
      [
        -34.813834,
        -55.945972
      ],
      [
        -34.814521,
        -55.945414
      ],
      [
        -34.815702,
        -55.947538
      ],
      [
        -34.815019,
        -55.948091
      ]
    ]
  },
  {
    "id": "978|121",
    "territorio": "1",
    "coords": [
      [
        -34.815737,
        -55.947597
      ],
      [
        -34.81505,
        -55.948155
      ],
      [
        -34.816208,
        -55.950285
      ],
      [
        -34.816952,
        -55.949721
      ]
    ]
  },
  {
    "id": "979|122",
    "territorio": "1",
    "coords": [
      [
        -34.81501,
        -55.948192
      ],
      [
        -34.81616,
        -55.950328
      ],
      [
        -34.8159,
        -55.950488
      ],
      [
        -34.815644,
        -55.950601
      ],
      [
        -34.815376,
        -55.950682
      ],
      [
        -34.814319,
        -55.948756
      ]
    ]
  },
  {
    "id": "980|123",
    "territorio": "1",
    "coords": [
      [
        -34.813596,
        -55.949324
      ],
      [
        -34.81427,
        -55.948777
      ],
      [
        -34.815318,
        -55.950692
      ],
      [
        -34.815054,
        -55.950703
      ],
      [
        -34.814706,
        -55.950639
      ],
      [
        -34.814213,
        -55.950456
      ]
    ]
  },
  {
    "id": "977|120",
    "territorio": "1",
    "coords": [
      [
        -34.818133,
        -55.95191
      ],
      [
        -34.816966,
        -55.94978
      ],
      [
        -34.816243,
        -55.950349
      ],
      [
        -34.817437,
        -55.952457
      ]
    ]
  },
  {
    "id": "1111|119",
    "territorio": "1",
    "coords": [
      [
        -34.81619,
        -55.950376
      ],
      [
        -34.816058,
        -55.950483
      ],
      [
        -34.815666,
        -55.951154
      ],
      [
        -34.816697,
        -55.953037
      ],
      [
        -34.817379,
        -55.952495
      ]
    ]
  },
  {
    "id": "1110|118",
    "territorio": "1",
    "coords": [
      [
        -34.816657,
        -55.953074
      ],
      [
        -34.815627,
        -55.951213
      ],
      [
        -34.815481,
        -55.951647
      ],
      [
        -34.815415,
        -55.951942
      ],
      [
        -34.815376,
        -55.95257
      ],
      [
        -34.815948,
        -55.953653
      ]
    ]
  },
  {
    "id": "1109|117",
    "territorio": "1",
    "coords": [
      [
        -34.815089,
        -55.954008
      ],
      [
        -34.815248,
        -55.953573
      ],
      [
        -34.815323,
        -55.953042
      ],
      [
        -34.815318,
        -55.952586
      ],
      [
        -34.814737,
        -55.951588
      ],
      [
        -34.814032,
        -55.952135
      ]
    ]
  },
  {
    "id": "984|124",
    "territorio": "1",
    "coords": [
      [
        -34.814711,
        -55.951518
      ],
      [
        -34.814006,
        -55.952087
      ],
      [
        -34.813015,
        -55.950156
      ],
      [
        -34.813363,
        -55.95014
      ],
      [
        -34.813786,
        -55.950242
      ],
      [
        -34.814129,
        -55.950456
      ]
    ]
  },
  {
    "id": "1108|116",
    "territorio": "1",
    "coords": [
      [
        -34.815147,
        -55.95427
      ],
      [
        -34.814724,
        -55.953482
      ],
      [
        -34.813984,
        -55.952168
      ],
      [
        -34.813323,
        -55.952715
      ],
      [
        -34.814451,
        -55.954823
      ]
    ]
  },
  {
    "id": "1107|115",
    "territorio": "1",
    "coords": [
      [
        -34.814407,
        -55.95486
      ],
      [
        -34.813279,
        -55.952752
      ],
      [
        -34.812583,
        -55.953299
      ],
      [
        -34.813755,
        -55.955418
      ]
    ]
  },
  {
    "id": "983|125",
    "territorio": "1",
    "coords": [
      [
        -34.813957,
        -55.952119
      ],
      [
        -34.812944,
        -55.950161
      ],
      [
        -34.812645,
        -55.95022
      ],
      [
        -34.812522,
        -55.950263
      ],
      [
        -34.812156,
        -55.950542
      ],
      [
        -34.813292,
        -55.952656
      ]
    ]
  },
  {
    "id": "984|126",
    "territorio": "1",
    "coords": [
      [
        -34.81324,
        -55.952688
      ],
      [
        -34.812094,
        -55.950574
      ],
      [
        -34.811363,
        -55.951084
      ],
      [
        -34.812548,
        -55.953246
      ]
    ]
  },
  {
    "id": "705|6 301",
    "territorio": "3",
    "coords": [
      [
        -34.81693,
        -55.948455
      ],
      [
        -34.818921,
        -55.946782
      ],
      [
        -34.818472,
        -55.945902
      ],
      [
        -34.817609,
        -55.946567
      ],
      [
        -34.817247,
        -55.946739
      ],
      [
        -34.816719,
        -55.946867
      ],
      [
        -34.81656,
        -55.947715
      ]
    ]
  },
  {
    "id": "723|22 318",
    "territorio": "3",
    "coords": [
      [
        -34.819018,
        -55.946707
      ],
      [
        -34.81856,
        -55.945837
      ],
      [
        -34.819766,
        -55.944872
      ],
      [
        -34.820621,
        -55.943949
      ],
      [
        -34.821264,
        -55.943263
      ],
      [
        -34.822083,
        -55.944217
      ]
    ]
  },
  {
    "id": "317",
    "territorio": "3",
    "coords": [
      [
        -34.818525,
        -55.945698
      ],
      [
        -34.818357,
        -55.945022
      ],
      [
        -34.81834,
        -55.944518
      ],
      [
        -34.818754,
        -55.944239
      ],
      [
        -34.8193,
        -55.943638
      ],
      [
        -34.819855,
        -55.942941
      ],
      [
        -34.82026,
        -55.942512
      ],
      [
        -34.820647,
        -55.942211
      ],
      [
        -34.820815,
        -55.942662
      ],
      [
        -34.821176,
        -55.943198
      ],
      [
        -34.82011,
        -55.944335
      ],
      [
        -34.819405,
        -55.945022
      ]
    ]
  },
  {
    "id": "302",
    "territorio": "3",
    "coords": [
      [
        -34.816736,
        -55.946717
      ],
      [
        -34.817344,
        -55.946578
      ],
      [
        -34.817996,
        -55.946138
      ],
      [
        -34.818436,
        -55.945795
      ],
      [
        -34.818243,
        -55.944979
      ],
      [
        -34.818199,
        -55.944099
      ],
      [
        -34.818234,
        -55.941954
      ],
      [
        -34.817626,
        -55.942919
      ],
      [
        -34.817265,
        -55.943896
      ],
      [
        -34.816939,
        -55.945483
      ]
    ]
  },
  {
    "id": "315",
    "territorio": "3",
    "coords": [
      [
        -34.818322,
        -55.944389
      ],
      [
        -34.818718,
        -55.94411
      ],
      [
        -34.819414,
        -55.943273
      ],
      [
        -34.819185,
        -55.94102
      ],
      [
        -34.818692,
        -55.941428
      ],
      [
        -34.81834,
        -55.941814
      ],
      [
        -34.818296,
        -55.943949
      ]
    ]
  },
  {
    "id": "316",
    "territorio": "3",
    "coords": [
      [
        -34.819493,
        -55.943155
      ],
      [
        -34.8193,
        -55.940956
      ],
      [
        -34.819775,
        -55.94072
      ],
      [
        -34.82018,
        -55.94057
      ],
      [
        -34.820392,
        -55.941525
      ],
      [
        -34.820577,
        -55.942125
      ],
      [
        -34.820004,
        -55.942565
      ]
    ]
  },
  {
    "id": "314",
    "territorio": "3",
    "coords": [
      [
        -34.818269,
        -55.941621
      ],
      [
        -34.817468,
        -55.940173
      ],
      [
        -34.818745,
        -55.93954
      ],
      [
        -34.819335,
        -55.939078
      ],
      [
        -34.820119,
        -55.940409
      ],
      [
        -34.819555,
        -55.940623
      ],
      [
        -34.81893,
        -55.940956
      ]
    ]
  },
  {
    "id": "304 - B",
    "territorio": "3",
    "coords": [
      [
        -34.817802,
        -55.940913
      ],
      [
        -34.817344,
        -55.940194
      ],
      [
        -34.816455,
        -55.94057
      ],
      [
        -34.815618,
        -55.940838
      ],
      [
        -34.814896,
        -55.940913
      ],
      [
        -34.81412,
        -55.940827
      ],
      [
        -34.814684,
        -55.942651
      ],
      [
        -34.815063,
        -55.943413
      ],
      [
        -34.815724,
        -55.942898
      ],
      [
        -34.815327,
        -55.941889
      ],
      [
        -34.815371,
        -55.941718
      ],
      [
        -34.816049,
        -55.941621
      ],
      [
        -34.816411,
        -55.942222
      ]
    ]
  },
  {
    "id": "304 - A",
    "territorio": "3",
    "coords": [
      [
        -34.816411,
        -55.942222
      ],
      [
        -34.817793,
        -55.940924
      ],
      [
        -34.81819,
        -55.941718
      ],
      [
        -34.817529,
        -55.942769
      ],
      [
        -34.817142,
        -55.94381
      ],
      [
        -34.817001,
        -55.944368
      ],
      [
        -34.816781,
        -55.945634
      ],
      [
        -34.816243,
        -55.945119
      ],
      [
        -34.815609,
        -55.944293
      ],
      [
        -34.815133,
        -55.943542
      ],
      [
        -34.815838,
        -55.942984
      ],
      [
        -34.816023,
        -55.943359
      ],
      [
        -34.816367,
        -55.94382
      ],
      [
        -34.81656,
        -55.943584
      ],
      [
        -34.816736,
        -55.942876
      ]
    ]
  },
  {
    "id": "303",
    "territorio": "3",
    "coords": [
      [
        -34.816384,
        -55.94749
      ],
      [
        -34.81649,
        -55.947307
      ],
      [
        -34.816736,
        -55.94573
      ],
      [
        -34.816243,
        -55.945258
      ],
      [
        -34.81582,
        -55.944765
      ],
      [
        -34.815107,
        -55.943745
      ],
      [
        -34.814508,
        -55.944314
      ],
      [
        -34.816217,
        -55.947415
      ]
    ]
  },
  {
    "id": "305",
    "territorio": "3",
    "coords": [
      [
        -34.814006,
        -55.940806
      ],
      [
        -34.812332,
        -55.940237
      ],
      [
        -34.814288,
        -55.94382
      ],
      [
        -34.814913,
        -55.943359
      ],
      [
        -34.814402,
        -55.942222
      ],
      [
        -34.8142,
        -55.941589
      ]
    ]
  },
  {
    "id": "742|41 319",
    "territorio": "4",
    "coords": [
      [
        -34.822233,
        -55.944078
      ],
      [
        -34.82439,
        -55.942329
      ],
      [
        -34.823915,
        -55.941868
      ],
      [
        -34.82373,
        -55.941632
      ],
      [
        -34.822849,
        -55.942329
      ],
      [
        -34.822004,
        -55.942833
      ],
      [
        -34.821422,
        -55.943177
      ]
    ]
  },
  {
    "id": "760|59 335",
    "territorio": "4",
    "coords": [
      [
        -34.824479,
        -55.942233
      ],
      [
        -34.824038,
        -55.941836
      ],
      [
        -34.823818,
        -55.941578
      ],
      [
        -34.824804,
        -55.940784
      ],
      [
        -34.825817,
        -55.939647
      ],
      [
        -34.826425,
        -55.940666
      ]
    ]
  },
  {
    "id": "336",
    "territorio": "4",
    "coords": [
      [
        -34.826531,
        -55.94057
      ],
      [
        -34.827156,
        -55.940076
      ],
      [
        -34.826258,
        -55.938263
      ],
      [
        -34.825483,
        -55.938907
      ]
    ]
  },
  {
    "id": "337",
    "territorio": "4",
    "coords": [
      [
        -34.825421,
        -55.938821
      ],
      [
        -34.826196,
        -55.938166
      ],
      [
        -34.824901,
        -55.935935
      ],
      [
        -34.824065,
        -55.936761
      ]
    ]
  },
  {
    "id": "338",
    "territorio": "4",
    "coords": [
      [
        -34.823985,
        -55.936579
      ],
      [
        -34.824813,
        -55.935763
      ],
      [
        -34.824047,
        -55.934476
      ],
      [
        -34.82321,
        -55.935162
      ]
    ]
  },
  {
    "id": "330",
    "territorio": "4",
    "coords": [
      [
        -34.823087,
        -55.935152
      ],
      [
        -34.822056,
        -55.935752
      ],
      [
        -34.821088,
        -55.936514
      ],
      [
        -34.821643,
        -55.937297
      ],
      [
        -34.821916,
        -55.937662
      ],
      [
        -34.822603,
        -55.936793
      ],
      [
        -34.822964,
        -55.9363
      ],
      [
        -34.823404,
        -55.93586
      ]
    ]
  },
  {
    "id": "323",
    "territorio": "4",
    "coords": [
      [
        -34.821845,
        -55.937759
      ],
      [
        -34.820991,
        -55.9366
      ],
      [
        -34.819943,
        -55.938284
      ],
      [
        -34.819449,
        -55.93895
      ],
      [
        -34.819855,
        -55.939636
      ],
      [
        -34.820771,
        -55.939025
      ]
    ]
  },
  {
    "id": "322",
    "territorio": "4",
    "coords": [
      [
        -34.820277,
        -55.940377
      ],
      [
        -34.819934,
        -55.939701
      ],
      [
        -34.82107,
        -55.938917
      ],
      [
        -34.821924,
        -55.937866
      ],
      [
        -34.822241,
        -55.938563
      ],
      [
        -34.822479,
        -55.939196
      ],
      [
        -34.82188,
        -55.939808
      ],
      [
        -34.821352,
        -55.940108
      ]
    ]
  },
  {
    "id": "331",
    "territorio": "4",
    "coords": [
      [
        -34.822576,
        -55.939057
      ],
      [
        -34.822012,
        -55.937769
      ],
      [
        -34.822937,
        -55.936493
      ],
      [
        -34.823474,
        -55.935978
      ],
      [
        -34.823897,
        -55.936707
      ],
      [
        -34.82358,
        -55.937115
      ],
      [
        -34.82292,
        -55.938478
      ]
    ]
  },
  {
    "id": "332",
    "territorio": "4",
    "coords": [
      [
        -34.822911,
        -55.940076
      ],
      [
        -34.822629,
        -55.939271
      ],
      [
        -34.823254,
        -55.938123
      ],
      [
        -34.823651,
        -55.937287
      ],
      [
        -34.823985,
        -55.936857
      ],
      [
        -34.824408,
        -55.937608
      ],
      [
        -34.823853,
        -55.938842
      ],
      [
        -34.82336,
        -55.939615
      ]
    ]
  },
  {
    "id": "333",
    "territorio": "4",
    "coords": [
      [
        -34.823157,
        -55.94072
      ],
      [
        -34.822937,
        -55.940226
      ],
      [
        -34.823659,
        -55.939389
      ],
      [
        -34.824487,
        -55.937673
      ],
      [
        -34.82513,
        -55.93866
      ],
      [
        -34.824153,
        -55.93984
      ],
      [
        -34.823977,
        -55.940065
      ]
    ]
  },
  {
    "id": "334",
    "territorio": "4",
    "coords": [
      [
        -34.825738,
        -55.93955
      ],
      [
        -34.825201,
        -55.938735
      ],
      [
        -34.824161,
        -55.940001
      ],
      [
        -34.82321,
        -55.940838
      ],
      [
        -34.823748,
        -55.941449
      ],
      [
        -34.824778,
        -55.940666
      ]
    ]
  },
  {
    "id": "320",
    "territorio": "4",
    "coords": [
      [
        -34.821343,
        -55.943069
      ],
      [
        -34.822603,
        -55.942383
      ],
      [
        -34.823677,
        -55.941557
      ],
      [
        -34.823113,
        -55.940924
      ],
      [
        -34.821678,
        -55.941653
      ],
      [
        -34.820771,
        -55.942136
      ],
      [
        -34.820938,
        -55.942608
      ]
    ]
  },
  {
    "id": "321",
    "territorio": "4",
    "coords": [
      [
        -34.820727,
        -55.942018
      ],
      [
        -34.820498,
        -55.941246
      ],
      [
        -34.82033,
        -55.940527
      ],
      [
        -34.821229,
        -55.940377
      ],
      [
        -34.821801,
        -55.940076
      ],
      [
        -34.822559,
        -55.939389
      ],
      [
        -34.823078,
        -55.940816
      ]
    ]
  },
  {
    "id": "339",
    "territorio": "6",
    "coords": [
      [
        -34.824038,
        -55.934347
      ],
      [
        -34.823166,
        -55.932813
      ],
      [
        -34.822409,
        -55.933456
      ],
      [
        -34.823127,
        -55.93506
      ],
      [
        -34.823184,
        -55.935055
      ]
    ]
  },
  {
    "id": "329",
    "territorio": "6",
    "coords": [
      [
        -34.82103,
        -55.936439
      ],
      [
        -34.820462,
        -55.935398
      ],
      [
        -34.821074,
        -55.934921
      ],
      [
        -34.822008,
        -55.934304
      ],
      [
        -34.822528,
        -55.933843
      ],
      [
        -34.823069,
        -55.935076
      ],
      [
        -34.822457,
        -55.935425
      ],
      [
        -34.821704,
        -55.935881
      ]
    ]
  },
  {
    "id": "324",
    "territorio": "6",
    "coords": [
      [
        -34.819379,
        -55.93888
      ],
      [
        -34.818635,
        -55.937673
      ],
      [
        -34.818855,
        -55.937501
      ],
      [
        -34.819727,
        -55.936224
      ],
      [
        -34.820009,
        -55.935822
      ],
      [
        -34.820431,
        -55.935447
      ],
      [
        -34.820991,
        -55.936498
      ],
      [
        -34.820665,
        -55.936997
      ],
      [
        -34.819956,
        -55.938129
      ]
    ]
  },
  {
    "id": "325",
    "territorio": "6",
    "coords": [
      [
        -34.818599,
        -55.937614
      ],
      [
        -34.818036,
        -55.936294
      ],
      [
        -34.819326,
        -55.934969
      ],
      [
        -34.81989,
        -55.934476
      ],
      [
        -34.820379,
        -55.935382
      ],
      [
        -34.820057,
        -55.935672
      ],
      [
        -34.819524,
        -55.936407
      ],
      [
        -34.818925,
        -55.937281
      ],
      [
        -34.818793,
        -55.937458
      ]
    ]
  },
  {
    "id": "328",
    "territorio": "6",
    "coords": [
      [
        -34.820436,
        -55.935345
      ],
      [
        -34.819929,
        -55.934443
      ],
      [
        -34.820929,
        -55.933687
      ],
      [
        -34.822101,
        -55.933006
      ],
      [
        -34.822492,
        -55.933789
      ],
      [
        -34.821823,
        -55.934352
      ],
      [
        -34.820876,
        -55.934964
      ]
    ]
  },
  {
    "id": "815|43 340",
    "territorio": "6",
    "coords": [
      [
        -34.822391,
        -55.933403
      ],
      [
        -34.821453,
        -55.931718
      ],
      [
        -34.822193,
        -55.931091
      ],
      [
        -34.823131,
        -55.932781
      ]
    ]
  },
  {
    "id": "814|42",
    "territorio": "6",
    "coords": [
      [
        -34.821422,
        -55.931659
      ],
      [
        -34.822153,
        -55.931037
      ],
      [
        -34.821066,
        -55.92924
      ],
      [
        -34.820304,
        -55.929857
      ]
    ]
  },
  {
    "id": "810|38",
    "territorio": "6",
    "coords": [
      [
        -34.81989,
        -55.931541
      ],
      [
        -34.819375,
        -55.930619
      ],
      [
        -34.820264,
        -55.929894
      ],
      [
        -34.820823,
        -55.930817
      ]
    ]
  },
  {
    "id": "809|37",
    "territorio": "6",
    "coords": [
      [
        -34.820405,
        -55.932523
      ],
      [
        -34.819929,
        -55.9316
      ],
      [
        -34.82085,
        -55.93086
      ],
      [
        -34.821374,
        -55.931702
      ]
    ]
  },
  {
    "id": "808|36 327",
    "territorio": "6",
    "coords": [
      [
        -34.819894,
        -55.934384
      ],
      [
        -34.819348,
        -55.93343
      ],
      [
        -34.820339,
        -55.932657
      ],
      [
        -34.821414,
        -55.931756
      ],
      [
        -34.822061,
        -55.932952
      ],
      [
        -34.821334,
        -55.93336
      ],
      [
        -34.820969,
        -55.933569
      ]
    ]
  },
  {
    "id": "806|34",
    "territorio": "6",
    "coords": [
      [
        -34.818824,
        -55.932362
      ],
      [
        -34.81981,
        -55.93159
      ],
      [
        -34.819326,
        -55.930699
      ],
      [
        -34.818436,
        -55.931418
      ]
    ]
  },
  {
    "id": "807|35",
    "territorio": "6",
    "coords": [
      [
        -34.819308,
        -55.933365
      ],
      [
        -34.82037,
        -55.932555
      ],
      [
        -34.819868,
        -55.931633
      ],
      [
        -34.81885,
        -55.932496
      ]
    ]
  },
  {
    "id": "802|30",
    "territorio": "6",
    "coords": [
      [
        -34.81926,
        -55.933387
      ],
      [
        -34.818758,
        -55.932496
      ],
      [
        -34.818516,
        -55.931906
      ],
      [
        -34.818344,
        -55.93145
      ],
      [
        -34.81752,
        -55.932121
      ],
      [
        -34.818163,
        -55.933172
      ],
      [
        -34.818304,
        -55.933381
      ],
      [
        -34.818903,
        -55.933746
      ]
    ]
  },
  {
    "id": "799|27",
    "territorio": "6",
    "coords": [
      [
        -34.817093,
        -55.93388
      ],
      [
        -34.816516,
        -55.93284
      ],
      [
        -34.817472,
        -55.932148
      ],
      [
        -34.818238,
        -55.933397
      ]
    ]
  },
  {
    "id": "800|28",
    "territorio": "6",
    "coords": [
      [
        -34.817124,
        -55.93395
      ],
      [
        -34.818282,
        -55.933435
      ],
      [
        -34.81885,
        -55.933805
      ],
      [
        -34.818168,
        -55.934401
      ],
      [
        -34.817582,
        -55.934846
      ]
    ]
  },
  {
    "id": "801|29 326",
    "territorio": "6",
    "coords": [
      [
        -34.817613,
        -55.93491
      ],
      [
        -34.818053,
        -55.934561
      ],
      [
        -34.818648,
        -55.934073
      ],
      [
        -34.819291,
        -55.933456
      ],
      [
        -34.819841,
        -55.934427
      ],
      [
        -34.819313,
        -55.934878
      ],
      [
        -34.81826,
        -55.935972
      ],
      [
        -34.818018,
        -55.936235
      ],
      [
        -34.817912,
        -55.935946
      ],
      [
        -34.81778,
        -55.935484
      ]
    ]
  },
  {
    "id": "794|22",
    "territorio": "5",
    "coords": [
      [
        -34.816948,
        -55.933918
      ],
      [
        -34.816419,
        -55.932952
      ],
      [
        -34.814913,
        -55.933961
      ],
      [
        -34.815362,
        -55.934819
      ],
      [
        -34.816146,
        -55.934283
      ]
    ]
  },
  {
    "id": "313",
    "territorio": "5",
    "coords": [
      [
        -34.818234,
        -55.939647
      ],
      [
        -34.81885,
        -55.939347
      ],
      [
        -34.819264,
        -55.93896
      ],
      [
        -34.818701,
        -55.938027
      ],
      [
        -34.818525,
        -55.937748
      ],
      [
        -34.817723,
        -55.937984
      ]
    ]
  },
  {
    "id": "312",
    "territorio": "5",
    "coords": [
      [
        -34.817309,
        -55.940076
      ],
      [
        -34.818137,
        -55.939722
      ],
      [
        -34.817617,
        -55.938005
      ],
      [
        -34.817054,
        -55.938199
      ],
      [
        -34.81693,
        -55.938338
      ],
      [
        -34.816921,
        -55.938531
      ]
    ]
  },
  {
    "id": "311",
    "territorio": "5",
    "coords": [
      [
        -34.818463,
        -55.93763
      ],
      [
        -34.817926,
        -55.936407
      ],
      [
        -34.815688,
        -55.937823
      ],
      [
        -34.816305,
        -55.940505
      ],
      [
        -34.817203,
        -55.94014
      ],
      [
        -34.816877,
        -55.938842
      ],
      [
        -34.816825,
        -55.938531
      ],
      [
        -34.816842,
        -55.938284
      ],
      [
        -34.816992,
        -55.938091
      ],
      [
        -34.817265,
        -55.937984
      ],
      [
        -34.817688,
        -55.937855
      ]
    ]
  },
  {
    "id": "791|19 310",
    "territorio": "5",
    "coords": [
      [
        -34.815653,
        -55.937694
      ],
      [
        -34.81789,
        -55.936289
      ],
      [
        -34.817512,
        -55.93498
      ],
      [
        -34.816666,
        -55.935624
      ],
      [
        -34.815512,
        -55.936654
      ],
      [
        -34.815283,
        -55.936836
      ]
    ]
  },
  {
    "id": "789|17",
    "territorio": "5",
    "coords": [
      [
        -34.814781,
        -55.935516
      ],
      [
        -34.815283,
        -55.934862
      ],
      [
        -34.814816,
        -55.934047
      ],
      [
        -34.814341,
        -55.934722
      ]
    ]
  },
  {
    "id": "790|18",
    "territorio": "5",
    "coords": [
      [
        -34.815239,
        -55.936718
      ],
      [
        -34.815979,
        -55.936117
      ],
      [
        -34.815345,
        -55.935001
      ],
      [
        -34.814825,
        -55.935645
      ]
    ]
  },
  {
    "id": "792|20",
    "territorio": "5",
    "coords": [
      [
        -34.816054,
        -55.936074
      ],
      [
        -34.816675,
        -55.935516
      ],
      [
        -34.816089,
        -55.934438
      ],
      [
        -34.815569,
        -55.934781
      ],
      [
        -34.815393,
        -55.934899
      ]
    ]
  },
  {
    "id": "793|21",
    "territorio": "5",
    "coords": [
      [
        -34.816728,
        -55.935473
      ],
      [
        -34.817512,
        -55.934905
      ],
      [
        -34.817036,
        -55.933977
      ],
      [
        -34.816477,
        -55.934245
      ],
      [
        -34.816138,
        -55.934401
      ]
    ]
  },
  {
    "id": "783|11",
    "territorio": "5",
    "coords": [
      [
        -34.814279,
        -55.934803
      ],
      [
        -34.813733,
        -55.936187
      ],
      [
        -34.813499,
        -55.936788
      ],
      [
        -34.814116,
        -55.937571
      ],
      [
        -34.814257,
        -55.937179
      ],
      [
        -34.814438,
        -55.936509
      ],
      [
        -34.814631,
        -55.935854
      ],
      [
        -34.814719,
        -55.935634
      ]
    ]
  },
  {
    "id": "779|7",
    "territorio": "5",
    "coords": [
      [
        -34.812385,
        -55.938912
      ],
      [
        -34.812513,
        -55.93866
      ],
      [
        -34.812852,
        -55.938
      ],
      [
        -34.813178,
        -55.937389
      ],
      [
        -34.813464,
        -55.936847
      ],
      [
        -34.814076,
        -55.93763
      ],
      [
        -34.813354,
        -55.9383
      ],
      [
        -34.813107,
        -55.938504
      ]
    ]
  },
  {
    "id": "782|10",
    "territorio": "5",
    "coords": [
      [
        -34.815177,
        -55.936793
      ],
      [
        -34.814755,
        -55.935704
      ],
      [
        -34.814706,
        -55.935801
      ],
      [
        -34.814222,
        -55.937507
      ]
    ]
  },
  {
    "id": "309",
    "territorio": "5",
    "coords": [
      [
        -34.814094,
        -55.940714
      ],
      [
        -34.815014,
        -55.940816
      ],
      [
        -34.815547,
        -55.940747
      ],
      [
        -34.816234,
        -55.94057
      ],
      [
        -34.815939,
        -55.939314
      ],
      [
        -34.815199,
        -55.939556
      ],
      [
        -34.815036,
        -55.939599
      ],
      [
        -34.81453,
        -55.940006
      ],
      [
        -34.8142,
        -55.940403
      ],
      [
        -34.81412,
        -55.940559
      ]
    ]
  },
  {
    "id": "781|9 30",
    "territorio": "5",
    "coords": [
      [
        -34.815931,
        -55.939239
      ],
      [
        -34.815618,
        -55.937818
      ],
      [
        -34.815195,
        -55.936863
      ],
      [
        -34.814151,
        -55.93763
      ],
      [
        -34.814482,
        -55.938413
      ],
      [
        -34.814684,
        -55.938901
      ],
      [
        -34.815019,
        -55.93954
      ]
    ]
  },
  {
    "id": "708|8 306",
    "territorio": "5",
    "coords": [
      [
        -34.812138,
        -55.940065
      ],
      [
        -34.812773,
        -55.940264
      ],
      [
        -34.814574,
        -55.938789
      ],
      [
        -34.814112,
        -55.937673
      ],
      [
        -34.813284,
        -55.938451
      ],
      [
        -34.813081,
        -55.93859
      ],
      [
        -34.812354,
        -55.939003
      ],
      [
        -34.812266,
        -55.939406
      ]
    ]
  },
  {
    "id": "307",
    "territorio": "5",
    "coords": [
      [
        -34.812848,
        -55.940285
      ],
      [
        -34.813799,
        -55.940639
      ],
      [
        -34.814046,
        -55.94072
      ],
      [
        -34.814063,
        -55.940559
      ],
      [
        -34.814195,
        -55.940291
      ],
      [
        -34.814556,
        -55.939888
      ],
      [
        -34.814979,
        -55.939556
      ],
      [
        -34.8146,
        -55.938864
      ]
    ]
  },
  {
    "id": "703|1",
    "territorio": "7",
    "coords": [
      [
        -34.812108,
        -55.93977
      ],
      [
        -34.811152,
        -55.937957
      ],
      [
        -34.811901,
        -55.93734
      ],
      [
        -34.812495,
        -55.938478
      ],
      [
        -34.812319,
        -55.938848
      ],
      [
        -34.8122,
        -55.939239
      ]
    ]
  },
  {
    "id": "704|2",
    "territorio": "7",
    "coords": [
      [
        -34.811143,
        -55.937887
      ],
      [
        -34.811861,
        -55.937297
      ],
      [
        -34.811081,
        -55.93587
      ],
      [
        -34.810337,
        -55.936482
      ]
    ]
  },
  {
    "id": "778|6",
    "territorio": "7",
    "coords": [
      [
        -34.812513,
        -55.938413
      ],
      [
        -34.811438,
        -55.936364
      ],
      [
        -34.81279,
        -55.935844
      ],
      [
        -34.813301,
        -55.936739
      ],
      [
        -34.813385,
        -55.936798
      ]
    ]
  },
  {
    "id": "777|5",
    "territorio": "7",
    "coords": [
      [
        -34.811416,
        -55.9363
      ],
      [
        -34.811139,
        -55.935833
      ],
      [
        -34.812244,
        -55.934835
      ],
      [
        -34.812764,
        -55.935801
      ]
    ]
  },
  {
    "id": "784|12",
    "territorio": "7",
    "coords": [
      [
        -34.813416,
        -55.936734
      ],
      [
        -34.814024,
        -55.935189
      ],
      [
        -34.813971,
        -55.935146
      ],
      [
        -34.813777,
        -55.934975
      ],
      [
        -34.81368,
        -55.934948
      ],
      [
        -34.813557,
        -55.934975
      ],
      [
        -34.812852,
        -55.935817
      ],
      [
        -34.813341,
        -55.936686
      ]
    ]
  },
  {
    "id": "785|13",
    "territorio": "7",
    "coords": [
      [
        -34.812817,
        -55.935747
      ],
      [
        -34.812293,
        -55.934798
      ],
      [
        -34.813469,
        -55.933945
      ],
      [
        -34.81409,
        -55.934556
      ],
      [
        -34.814204,
        -55.934706
      ],
      [
        -34.81405,
        -55.935125
      ],
      [
        -34.813971,
        -55.935066
      ],
      [
        -34.813817,
        -55.93491
      ],
      [
        -34.813667,
        -55.934878
      ],
      [
        -34.81353,
        -55.934905
      ]
    ]
  },
  {
    "id": "788|16",
    "territorio": "7",
    "coords": [
      [
        -34.814239,
        -55.934631
      ],
      [
        -34.814129,
        -55.934481
      ],
      [
        -34.813521,
        -55.933907
      ],
      [
        -34.814349,
        -55.933108
      ],
      [
        -34.814772,
        -55.933902
      ],
      [
        -34.81446,
        -55.934288
      ]
    ]
  },
  {
    "id": "795|23",
    "territorio": "7",
    "coords": [
      [
        -34.814393,
        -55.933076
      ],
      [
        -34.815856,
        -55.931885
      ],
      [
        -34.816384,
        -55.932791
      ],
      [
        -34.814887,
        -55.933778
      ],
      [
        -34.814825,
        -55.933843
      ]
    ]
  },
  {
    "id": "796|24 518",
    "territorio": "7",
    "coords": [
      [
        -34.815807,
        -55.931836
      ],
      [
        -34.814997,
        -55.93086
      ],
      [
        -34.814649,
        -55.931386
      ],
      [
        -34.814244,
        -55.931869
      ],
      [
        -34.813905,
        -55.93219
      ],
      [
        -34.814358,
        -55.933022
      ]
    ]
  },
  {
    "id": "786|14 509",
    "territorio": "7",
    "coords": [
      [
        -34.813429,
        -55.933896
      ],
      [
        -34.812627,
        -55.933086
      ],
      [
        -34.812363,
        -55.933483
      ],
      [
        -34.811967,
        -55.933918
      ],
      [
        -34.811861,
        -55.934014
      ],
      [
        -34.812257,
        -55.934733
      ]
    ]
  },
  {
    "id": "775|3 501",
    "territorio": "7",
    "coords": [
      [
        -34.810302,
        -55.936412
      ],
      [
        -34.80965,
        -55.935286
      ],
      [
        -34.810209,
        -55.934202
      ],
      [
        -34.81046,
        -55.934358
      ],
      [
        -34.810535,
        -55.93439
      ],
      [
        -34.810579,
        -55.934819
      ],
      [
        -34.810773,
        -55.935323
      ],
      [
        -34.811051,
        -55.935827
      ]
    ]
  },
  {
    "id": "776|4 508",
    "territorio": "7",
    "coords": [
      [
        -34.810601,
        -55.934395
      ],
      [
        -34.811042,
        -55.934384
      ],
      [
        -34.811363,
        -55.934288
      ],
      [
        -34.811808,
        -55.934052
      ],
      [
        -34.8122,
        -55.934781
      ],
      [
        -34.811103,
        -55.935785
      ],
      [
        -34.810817,
        -55.935275
      ],
      [
        -34.81065,
        -55.934867
      ],
      [
        -34.810628,
        -55.934696
      ]
    ]
  },
  {
    "id": "822|507",
    "territorio": "7",
    "coords": [
      [
        -34.810236,
        -55.934111
      ],
      [
        -34.810817,
        -55.932968
      ],
      [
        -34.811064,
        -55.933118
      ],
      [
        -34.811258,
        -55.933177
      ],
      [
        -34.81146,
        -55.933113
      ],
      [
        -34.811641,
        -55.932958
      ],
      [
        -34.811998,
        -55.932443
      ],
      [
        -34.812597,
        -55.933043
      ],
      [
        -34.812275,
        -55.93351
      ],
      [
        -34.811808,
        -55.933982
      ],
      [
        -34.811337,
        -55.934229
      ],
      [
        -34.810892,
        -55.934342
      ],
      [
        -34.810593,
        -55.934342
      ]
    ]
  },
  {
    "id": "825|510",
    "territorio": "7",
    "coords": [
      [
        -34.810844,
        -55.932909
      ],
      [
        -34.811385,
        -55.93181
      ],
      [
        -34.81194,
        -55.932389
      ],
      [
        -34.81161,
        -55.932899
      ],
      [
        -34.811421,
        -55.93307
      ],
      [
        -34.811275,
        -55.933097
      ],
      [
        -34.811139,
        -55.933086
      ]
    ]
  },
  {
    "id": "831|515",
    "territorio": "7",
    "coords": [
      [
        -34.811421,
        -55.931751
      ],
      [
        -34.811804,
        -55.930983
      ],
      [
        -34.812227,
        -55.930388
      ],
      [
        -34.812535,
        -55.930082
      ],
      [
        -34.812812,
        -55.929862
      ],
      [
        -34.813676,
        -55.929283
      ],
      [
        -34.814261,
        -55.930034
      ],
      [
        -34.813781,
        -55.930286
      ],
      [
        -34.813416,
        -55.930517
      ],
      [
        -34.813103,
        -55.930774
      ],
      [
        -34.812702,
        -55.931236
      ],
      [
        -34.811984,
        -55.932325
      ]
    ]
  },
  {
    "id": "832|516",
    "territorio": "7",
    "coords": [
      [
        -34.812033,
        -55.932373
      ],
      [
        -34.812764,
        -55.931252
      ],
      [
        -34.813182,
        -55.930812
      ],
      [
        -34.813517,
        -55.930538
      ],
      [
        -34.81394,
        -55.930275
      ],
      [
        -34.814327,
        -55.930082
      ],
      [
        -34.814935,
        -55.930785
      ],
      [
        -34.814393,
        -55.931016
      ],
      [
        -34.813975,
        -55.93123
      ],
      [
        -34.813605,
        -55.931563
      ],
      [
        -34.813134,
        -55.932201
      ],
      [
        -34.812909,
        -55.932566
      ],
      [
        -34.812627,
        -55.932984
      ]
    ]
  },
  {
    "id": "838|521",
    "territorio": "8",
    "coords": [
      [
        -34.814371,
        -55.92997
      ],
      [
        -34.81375,
        -55.929224
      ],
      [
        -34.816168,
        -55.927582
      ],
      [
        -34.816604,
        -55.928054
      ],
      [
        -34.816882,
        -55.928344
      ],
      [
        -34.815622,
        -55.929272
      ]
    ]
  },
  {
    "id": "837|520",
    "territorio": "8",
    "coords": [
      [
        -34.814416,
        -55.930023
      ],
      [
        -34.815433,
        -55.929465
      ],
      [
        -34.816036,
        -55.929068
      ],
      [
        -34.816578,
        -55.928655
      ],
      [
        -34.816935,
        -55.928376
      ],
      [
        -34.81723,
        -55.928827
      ],
      [
        -34.817402,
        -55.929202
      ],
      [
        -34.816565,
        -55.929894
      ],
      [
        -34.816151,
        -55.9302
      ],
      [
        -34.815481,
        -55.930549
      ],
      [
        -34.815041,
        -55.930753
      ]
    ]
  },
  {
    "id": "797|25 519",
    "territorio": "8",
    "coords": [
      [
        -34.815094,
        -55.930796
      ],
      [
        -34.816001,
        -55.930356
      ],
      [
        -34.816507,
        -55.930029
      ],
      [
        -34.81745,
        -55.929261
      ],
      [
        -34.817846,
        -55.930308
      ],
      [
        -34.817265,
        -55.930683
      ],
      [
        -34.816974,
        -55.930871
      ],
      [
        -34.816675,
        -55.931118
      ],
      [
        -34.815887,
        -55.931777
      ]
    ]
  },
  {
    "id": "798|26",
    "territorio": "8",
    "coords": [
      [
        -34.816459,
        -55.932732
      ],
      [
        -34.81741,
        -55.932056
      ],
      [
        -34.816855,
        -55.931048
      ],
      [
        -34.815931,
        -55.931831
      ]
    ]
  },
  {
    "id": "803|31",
    "territorio": "8",
    "coords": [
      [
        -34.816913,
        -55.93101
      ],
      [
        -34.817133,
        -55.930833
      ],
      [
        -34.817877,
        -55.930367
      ],
      [
        -34.8183,
        -55.931359
      ],
      [
        -34.817468,
        -55.932013
      ]
    ]
  },
  {
    "id": "805|33",
    "territorio": "8",
    "coords": [
      [
        -34.818357,
        -55.931305
      ],
      [
        -34.81793,
        -55.930345
      ],
      [
        -34.81878,
        -55.929632
      ],
      [
        -34.819264,
        -55.93057
      ]
    ]
  },
  {
    "id": "811|39",
    "territorio": "8",
    "coords": [
      [
        -34.818828,
        -55.929589
      ],
      [
        -34.819696,
        -55.92895
      ],
      [
        -34.820194,
        -55.929814
      ],
      [
        -34.819326,
        -55.930533
      ]
    ]
  },
  {
    "id": "813|41",
    "territorio": "8",
    "coords": [
      [
        -34.819744,
        -55.928918
      ],
      [
        -34.82048,
        -55.928253
      ],
      [
        -34.821008,
        -55.929149
      ],
      [
        -34.820251,
        -55.929776
      ]
    ]
  },
  {
    "id": "812|40 529",
    "territorio": "8",
    "coords": [
      [
        -34.820436,
        -55.928194
      ],
      [
        -34.819397,
        -55.926397
      ],
      [
        -34.818599,
        -55.926842
      ],
      [
        -34.81885,
        -55.927491
      ],
      [
        -34.819057,
        -55.927856
      ],
      [
        -34.819344,
        -55.928264
      ],
      [
        -34.819705,
        -55.928864
      ]
    ]
  },
  {
    "id": "847|530",
    "territorio": "8",
    "coords": [
      [
        -34.818573,
        -55.926767
      ],
      [
        -34.819379,
        -55.926327
      ],
      [
        -34.818798,
        -55.925303
      ],
      [
        -34.818463,
        -55.924627
      ],
      [
        -34.817758,
        -55.925227
      ],
      [
        -34.818163,
        -55.925844
      ]
    ]
  },
  {
    "id": "843|526",
    "territorio": "8",
    "coords": [
      [
        -34.816221,
        -55.92755
      ],
      [
        -34.816811,
        -55.927132
      ],
      [
        -34.817155,
        -55.926724
      ],
      [
        -34.81734,
        -55.926263
      ],
      [
        -34.817459,
        -55.925608
      ],
      [
        -34.817498,
        -55.925469
      ],
      [
        -34.81771,
        -55.925254
      ],
      [
        -34.818243,
        -55.926139
      ],
      [
        -34.818511,
        -55.926805
      ],
      [
        -34.816935,
        -55.928269
      ]
    ]
  },
  {
    "id": "844|527",
    "territorio": "8",
    "coords": [
      [
        -34.816979,
        -55.928339
      ],
      [
        -34.817846,
        -55.927502
      ],
      [
        -34.818547,
        -55.926874
      ],
      [
        -34.818714,
        -55.927352
      ],
      [
        -34.818983,
        -55.92784
      ],
      [
        -34.817463,
        -55.92916
      ],
      [
        -34.817278,
        -55.928757
      ]
    ]
  },
  {
    "id": "804|32 528",
    "territorio": "8",
    "coords": [
      [
        -34.81749,
        -55.929224
      ],
      [
        -34.819022,
        -55.927894
      ],
      [
        -34.819463,
        -55.928591
      ],
      [
        -34.819656,
        -55.928897
      ],
      [
        -34.818767,
        -55.929551
      ],
      [
        -34.817908,
        -55.930265
      ]
    ]
  },
  {
    "id": "846|531 890|40",
    "territorio": "10",
    "coords": [
      [
        -34.817428,
        -55.925383
      ],
      [
        -34.817661,
        -55.925163
      ],
      [
        -34.818419,
        -55.924541
      ],
      [
        -34.817829,
        -55.923393
      ],
      [
        -34.817349,
        -55.922545
      ],
      [
        -34.816855,
        -55.923076
      ],
      [
        -34.816648,
        -55.923312
      ],
      [
        -34.817036,
        -55.923983
      ],
      [
        -34.817217,
        -55.924353
      ],
      [
        -34.817327,
        -55.925034
      ],
      [
        -34.817362,
        -55.92526
      ]
    ]
  },
  {
    "id": "889|39",
    "territorio": "10",
    "coords": [
      [
        -34.8166,
        -55.923259
      ],
      [
        -34.817327,
        -55.922481
      ],
      [
        -34.816547,
        -55.921134
      ],
      [
        -34.815891,
        -55.919954
      ],
      [
        -34.815243,
        -55.920491
      ],
      [
        -34.815503,
        -55.921177
      ],
      [
        -34.81564,
        -55.922019
      ],
      [
        -34.815926,
        -55.922293
      ]
    ]
  },
  {
    "id": "842|525",
    "territorio": "10",
    "coords": [
      [
        -34.815455,
        -55.926472
      ],
      [
        -34.815706,
        -55.926917
      ],
      [
        -34.816151,
        -55.927464
      ],
      [
        -34.816803,
        -55.927008
      ],
      [
        -34.817102,
        -55.92659
      ],
      [
        -34.817225,
        -55.926279
      ],
      [
        -34.817318,
        -55.925871
      ],
      [
        -34.817384,
        -55.92549
      ],
      [
        -34.816864,
        -55.925496
      ],
      [
        -34.816248,
        -55.925737
      ],
      [
        -34.815746,
        -55.926182
      ]
    ]
  },
  {
    "id": "841|524 879|29",
    "territorio": "10",
    "coords": [
      [
        -34.817371,
        -55.92541
      ],
      [
        -34.817313,
        -55.925324
      ],
      [
        -34.817225,
        -55.924771
      ],
      [
        -34.81715,
        -55.924348
      ],
      [
        -34.816609,
        -55.923377
      ],
      [
        -34.81608,
        -55.924374
      ],
      [
        -34.815957,
        -55.924573
      ],
      [
        -34.815697,
        -55.92482
      ],
      [
        -34.814896,
        -55.92549
      ],
      [
        -34.815402,
        -55.926408
      ],
      [
        -34.816019,
        -55.925855
      ],
      [
        -34.816208,
        -55.925705
      ],
      [
        -34.816604,
        -55.925512
      ],
      [
        -34.816851,
        -55.925453
      ]
    ]
  },
  {
    "id": "880|30",
    "territorio": "10",
    "coords": [
      [
        -34.814442,
        -55.924525
      ],
      [
        -34.814649,
        -55.925045
      ],
      [
        -34.814852,
        -55.925426
      ],
      [
        -34.815759,
        -55.924702
      ],
      [
        -34.815953,
        -55.924471
      ],
      [
        -34.816569,
        -55.923312
      ],
      [
        -34.815878,
        -55.922357
      ],
      [
        -34.81564,
        -55.922089
      ],
      [
        -34.815556,
        -55.922658
      ],
      [
        -34.815402,
        -55.923216
      ],
      [
        -34.815138,
        -55.923774
      ],
      [
        -34.814874,
        -55.924149
      ],
      [
        -34.814645,
        -55.924364
      ]
    ]
  },
  {
    "id": "881|31",
    "territorio": "10",
    "coords": [
      [
        -34.813883,
        -55.923162
      ],
      [
        -34.814402,
        -55.924466
      ],
      [
        -34.814763,
        -55.924187
      ],
      [
        -34.814992,
        -55.923902
      ],
      [
        -34.815314,
        -55.923285
      ],
      [
        -34.81549,
        -55.922658
      ],
      [
        -34.815578,
        -55.922078
      ],
      [
        -34.815512,
        -55.922084
      ],
      [
        -34.814852,
        -55.922438
      ],
      [
        -34.814367,
        -55.922728
      ],
      [
        -34.814059,
        -55.922974
      ]
    ]
  },
  {
    "id": "882|32",
    "territorio": "10",
    "coords": [
      [
        -34.813385,
        -55.922019
      ],
      [
        -34.815204,
        -55.920528
      ],
      [
        -34.815446,
        -55.921188
      ],
      [
        -34.815574,
        -55.922019
      ],
      [
        -34.815503,
        -55.92203
      ],
      [
        -34.814671,
        -55.92247
      ],
      [
        -34.814319,
        -55.922695
      ],
      [
        -34.813997,
        -55.922953
      ],
      [
        -34.813852,
        -55.923087
      ]
    ]
  },
  {
    "id": "839|522",
    "territorio": "10",
    "coords": [
      [
        -34.81368,
        -55.929101
      ],
      [
        -34.816032,
        -55.927491
      ],
      [
        -34.8156,
        -55.926944
      ],
      [
        -34.815354,
        -55.92659
      ],
      [
        -34.814843,
        -55.927094
      ],
      [
        -34.81324,
        -55.928296
      ]
    ]
  },
  {
    "id": "840|523 878|28",
    "territorio": "10",
    "coords": [
      [
        -34.813187,
        -55.928189
      ],
      [
        -34.814402,
        -55.927309
      ],
      [
        -34.815318,
        -55.926472
      ],
      [
        -34.814772,
        -55.925603
      ],
      [
        -34.812702,
        -55.92733
      ]
    ]
  },
  {
    "id": "877|27",
    "territorio": "10",
    "coords": [
      [
        -34.812641,
        -55.927212
      ],
      [
        -34.814755,
        -55.925496
      ],
      [
        -34.814323,
        -55.924605
      ],
      [
        -34.812288,
        -55.925957
      ],
      [
        -34.812438,
        -55.926644
      ]
    ]
  },
  {
    "id": "876|26",
    "territorio": "10",
    "coords": [
      [
        -34.812244,
        -55.925817
      ],
      [
        -34.814261,
        -55.924476
      ],
      [
        -34.813777,
        -55.923285
      ],
      [
        -34.813248,
        -55.923951
      ],
      [
        -34.812914,
        -55.924294
      ],
      [
        -34.811962,
        -55.924906
      ]
    ]
  },
  {
    "id": "875|25",
    "territorio": "10",
    "coords": [
      [
        -34.811918,
        -55.924798
      ],
      [
        -34.811355,
        -55.923672
      ],
      [
        -34.813301,
        -55.922137
      ],
      [
        -34.813742,
        -55.923189
      ],
      [
        -34.813028,
        -55.924058
      ],
      [
        -34.812641,
        -55.924337
      ]
    ]
  },
  {
    "id": "817|505",
    "territorio": "9",
    "coords": [
      [
        -34.809566,
        -55.935044
      ],
      [
        -34.810042,
        -55.9341
      ],
      [
        -34.809751,
        -55.933832
      ],
      [
        -34.809496,
        -55.933478
      ],
      [
        -34.808641,
        -55.931911
      ],
      [
        -34.807981,
        -55.932255
      ]
    ]
  },
  {
    "id": "817|502",
    "territorio": "9",
    "coords": [
      [
        -34.810667,
        -55.93292
      ],
      [
        -34.810121,
        -55.934036
      ],
      [
        -34.80991,
        -55.933821
      ],
      [
        -34.809593,
        -55.933435
      ],
      [
        -34.809417,
        -55.933113
      ],
      [
        -34.808729,
        -55.931869
      ],
      [
        -34.809091,
        -55.931643
      ]
    ]
  },
  {
    "id": "826|511",
    "territorio": "9",
    "coords": [
      [
        -34.811266,
        -55.931718
      ],
      [
        -34.810747,
        -55.932823
      ],
      [
        -34.80998,
        -55.932212
      ],
      [
        -34.810711,
        -55.93101
      ],
      [
        -34.810993,
        -55.931439
      ]
    ]
  },
  {
    "id": "827|512",
    "territorio": "9",
    "coords": [
      [
        -34.809157,
        -55.931568
      ],
      [
        -34.809985,
        -55.930914
      ],
      [
        -34.810408,
        -55.930527
      ],
      [
        -34.810659,
        -55.930946
      ],
      [
        -34.809914,
        -55.932126
      ]
    ]
  },
  {
    "id": "830|514",
    "territorio": "9",
    "coords": [
      [
        -34.813574,
        -55.929176
      ],
      [
        -34.813125,
        -55.92836
      ],
      [
        -34.811733,
        -55.929412
      ],
      [
        -34.810782,
        -55.930946
      ],
      [
        -34.811037,
        -55.931311
      ],
      [
        -34.811346,
        -55.931633
      ],
      [
        -34.811857,
        -55.930592
      ],
      [
        -34.812376,
        -55.930012
      ],
      [
        -34.812975,
        -55.929573
      ]
    ]
  },
  {
    "id": "828|513 861|13",
    "territorio": "9",
    "coords": [
      [
        -34.810421,
        -55.930388
      ],
      [
        -34.809866,
        -55.929508
      ],
      [
        -34.810271,
        -55.929015
      ],
      [
        -34.8108,
        -55.928682
      ],
      [
        -34.811205,
        -55.928457
      ],
      [
        -34.812605,
        -55.927427
      ],
      [
        -34.813072,
        -55.928296
      ],
      [
        -34.81102,
        -55.929766
      ]
    ]
  },
  {
    "id": "819|504 860|12",
    "territorio": "9",
    "coords": [
      [
        -34.808685,
        -55.931751
      ],
      [
        -34.808227,
        -55.930946
      ],
      [
        -34.808862,
        -55.93056
      ],
      [
        -34.809804,
        -55.929594
      ],
      [
        -34.810324,
        -55.930485
      ],
      [
        -34.809575,
        -55.931107
      ]
    ]
  },
  {
    "id": "818|503 849|1",
    "territorio": "9",
    "coords": [
      [
        -34.807906,
        -55.93219
      ],
      [
        -34.808619,
        -55.93182
      ],
      [
        -34.808144,
        -55.930957
      ],
      [
        -34.807593,
        -55.931112
      ],
      [
        -34.80754,
        -55.93116
      ],
      [
        -34.807505,
        -55.931327
      ],
      [
        -34.807386,
        -55.931466
      ],
      [
        -34.807624,
        -55.931938
      ]
    ]
  },
  {
    "id": "859|11",
    "territorio": "9",
    "coords": [
      [
        -34.80762,
        -55.931032
      ],
      [
        -34.808122,
        -55.930903
      ],
      [
        -34.808566,
        -55.930656
      ],
      [
        -34.808954,
        -55.930356
      ],
      [
        -34.809765,
        -55.929481
      ],
      [
        -34.809654,
        -55.929331
      ],
      [
        -34.809342,
        -55.928339
      ],
      [
        -34.808197,
        -55.929852
      ],
      [
        -34.807844,
        -55.930442
      ],
      [
        -34.80765,
        -55.930849
      ]
    ]
  },
  {
    "id": "850|2",
    "territorio": "9",
    "coords": [
      [
        -34.807796,
        -55.930361
      ],
      [
        -34.806496,
        -55.928065
      ],
      [
        -34.806325,
        -55.927759
      ],
      [
        -34.806236,
        -55.927942
      ],
      [
        -34.805787,
        -55.928344
      ],
      [
        -34.805615,
        -55.928339
      ],
      [
        -34.805783,
        -55.928666
      ],
      [
        -34.807219,
        -55.931225
      ],
      [
        -34.807346,
        -55.931091
      ],
      [
        -34.807505,
        -55.931085
      ],
      [
        -34.807558,
        -55.93101
      ],
      [
        -34.807611,
        -55.930817
      ]
    ]
  },
  {
    "id": "858|10",
    "territorio": "9",
    "coords": [
      [
        -34.80784,
        -55.930313
      ],
      [
        -34.807289,
        -55.92932
      ],
      [
        -34.808086,
        -55.928146
      ],
      [
        -34.808549,
        -55.927497
      ],
      [
        -34.80895,
        -55.927083
      ],
      [
        -34.809311,
        -55.928264
      ],
      [
        -34.80821,
        -55.929734
      ]
    ]
  },
  {
    "id": "879|9",
    "territorio": "9",
    "coords": [
      [
        -34.80636,
        -55.927679
      ],
      [
        -34.808465,
        -55.925989
      ],
      [
        -34.808765,
        -55.926579
      ],
      [
        -34.808919,
        -55.92703
      ],
      [
        -34.80847,
        -55.927464
      ],
      [
        -34.807263,
        -55.92924
      ]
    ]
  },
  {
    "id": "865|16",
    "territorio": "9",
    "coords": [
      [
        -34.808553,
        -55.925936
      ],
      [
        -34.811293,
        -55.923736
      ],
      [
        -34.811804,
        -55.924873
      ],
      [
        -34.810245,
        -55.92571
      ],
      [
        -34.809734,
        -55.926129
      ],
      [
        -34.808976,
        -55.926933
      ],
      [
        -34.808774,
        -55.926354
      ]
    ]
  },
  {
    "id": "864|15",
    "territorio": "9",
    "coords": [
      [
        -34.809364,
        -55.928135
      ],
      [
        -34.80902,
        -55.927062
      ],
      [
        -34.809804,
        -55.926247
      ],
      [
        -34.810333,
        -55.925796
      ],
      [
        -34.811857,
        -55.924981
      ],
      [
        -34.812138,
        -55.925903
      ],
      [
        -34.81072,
        -55.926794
      ],
      [
        -34.810139,
        -55.927191
      ],
      [
        -34.809725,
        -55.927674
      ]
    ]
  },
  {
    "id": "863|14",
    "territorio": "9",
    "coords": [
      [
        -34.809795,
        -55.929369
      ],
      [
        -34.809698,
        -55.929165
      ],
      [
        -34.809399,
        -55.928242
      ],
      [
        -34.81028,
        -55.927202
      ],
      [
        -34.812183,
        -55.926032
      ],
      [
        -34.812561,
        -55.927309
      ],
      [
        -34.811954,
        -55.927341
      ],
      [
        -34.81131,
        -55.927598
      ],
      [
        -34.810747,
        -55.928028
      ],
      [
        -34.810368,
        -55.928564
      ],
      [
        -34.810253,
        -55.928843
      ]
    ]
  },
  {
    "id": "851|3",
    "territorio": "11",
    "coords": [
      [
        -34.80551,
        -55.928162
      ],
      [
        -34.805461,
        -55.928081
      ],
      [
        -34.804259,
        -55.925995
      ],
      [
        -34.805016,
        -55.925394
      ],
      [
        -34.806236,
        -55.927609
      ],
      [
        -34.806096,
        -55.92762
      ],
      [
        -34.805999,
        -55.927652
      ],
      [
        -34.805607,
        -55.927958
      ]
    ]
  },
  {
    "id": "852|4",
    "territorio": "11",
    "coords": [
      [
        -34.804219,
        -55.925914
      ],
      [
        -34.803237,
        -55.924133
      ],
      [
        -34.803959,
        -55.923548
      ],
      [
        -34.80458,
        -55.924444
      ],
      [
        -34.804981,
        -55.925362
      ]
    ]
  },
  {
    "id": "J1|528",
    "territorio": "11",
    "coords": [
      [
        -34.80318,
        -55.924031
      ],
      [
        -34.802048,
        -55.921987
      ],
      [
        -34.802704,
        -55.921429
      ],
      [
        -34.803475,
        -55.922787
      ]
    ]
  },
  {
    "id": "J2|529",
    "territorio": "11",
    "coords": [
      [
        -34.802012,
        -55.921928
      ],
      [
        -34.801541,
        -55.921059
      ],
      [
        -34.8014,
        -55.920796
      ],
      [
        -34.801136,
        -55.920212
      ],
      [
        -34.802193,
        -55.920523
      ],
      [
        -34.802664,
        -55.921365
      ]
    ]
  },
  {
    "id": "J6|533 J5|532 J10|537 J9|536",
    "territorio": "11",
    "coords": [
      [
        -34.803497,
        -55.922642
      ],
      [
        -34.802281,
        -55.920528
      ],
      [
        -34.804316,
        -55.919777
      ],
      [
        -34.805593,
        -55.919166
      ],
      [
        -34.806034,
        -55.920528
      ]
    ]
  },
  {
    "id": "J7|534",
    "territorio": "11",
    "coords": [
      [
        -34.803276,
        -55.923972
      ],
      [
        -34.803558,
        -55.922738
      ],
      [
        -34.80495,
        -55.92158
      ],
      [
        -34.805329,
        -55.922298
      ]
    ]
  },
  {
    "id": "835|5",
    "territorio": "11",
    "coords": [
      [
        -34.804043,
        -55.9235
      ],
      [
        -34.805417,
        -55.922406
      ],
      [
        -34.805637,
        -55.922813
      ],
      [
        -34.805963,
        -55.923135
      ],
      [
        -34.805179,
        -55.92365
      ],
      [
        -34.804871,
        -55.92394
      ],
      [
        -34.804607,
        -55.924326
      ]
    ]
  },
  {
    "id": "866|17",
    "territorio": "11",
    "coords": [
      [
        -34.808483,
        -55.925807
      ],
      [
        -34.811187,
        -55.923575
      ],
      [
        -34.810447,
        -55.922674
      ],
      [
        -34.809179,
        -55.924058
      ],
      [
        -34.807893,
        -55.924981
      ]
    ]
  },
  {
    "id": "856|8",
    "territorio": "11",
    "coords": [
      [
        -34.806307,
        -55.927534
      ],
      [
        -34.805602,
        -55.926279
      ],
      [
        -34.806712,
        -55.925721
      ],
      [
        -34.807787,
        -55.925045
      ],
      [
        -34.808368,
        -55.925903
      ]
    ]
  },
  {
    "id": "854|6",
    "territorio": "11",
    "coords": [
      [
        -34.804677,
        -55.924444
      ],
      [
        -34.804915,
        -55.924058
      ],
      [
        -34.805417,
        -55.923607
      ],
      [
        -34.806051,
        -55.923178
      ],
      [
        -34.806968,
        -55.924058
      ],
      [
        -34.806184,
        -55.924401
      ],
      [
        -34.80503,
        -55.92526
      ]
    ]
  },
  {
    "id": "855|7",
    "territorio": "11",
    "coords": [
      [
        -34.805541,
        -55.926193
      ],
      [
        -34.8051,
        -55.925399
      ],
      [
        -34.805902,
        -55.924702
      ],
      [
        -34.807056,
        -55.924144
      ],
      [
        -34.807743,
        -55.924948
      ],
      [
        -34.806668,
        -55.925603
      ]
    ]
  },
  {
    "id": "867|18",
    "territorio": "11",
    "coords": [
      [
        -34.807822,
        -55.924852
      ],
      [
        -34.80717,
        -55.924101
      ],
      [
        -34.808183,
        -55.923446
      ],
      [
        -34.808712,
        -55.92306
      ],
      [
        -34.809628,
        -55.921977
      ],
      [
        -34.810377,
        -55.922599
      ],
      [
        -34.809143,
        -55.92394
      ]
    ]
  },
  {
    "id": "869|19",
    "territorio": "11",
    "coords": [
      [
        -34.807065,
        -55.923951
      ],
      [
        -34.80614,
        -55.923125
      ],
      [
        -34.807241,
        -55.922116
      ],
      [
        -34.808527,
        -55.921322
      ],
      [
        -34.809452,
        -55.921901
      ],
      [
        -34.808879,
        -55.922062
      ],
      [
        -34.808289,
        -55.922374
      ],
      [
        -34.807743,
        -55.922792
      ],
      [
        -34.807188,
        -55.92364
      ]
    ]
  },
  {
    "id": "870|20",
    "territorio": "11",
    "coords": [
      [
        -34.806051,
        -55.923028
      ],
      [
        -34.805734,
        -55.922728
      ],
      [
        -34.805479,
        -55.922341
      ],
      [
        -34.806545,
        -55.921451
      ],
      [
        -34.807866,
        -55.920421
      ],
      [
        -34.808174,
        -55.92099
      ],
      [
        -34.808404,
        -55.921258
      ],
      [
        -34.807082,
        -55.922105
      ]
    ]
  },
  {
    "id": "J8|535",
    "territorio": "11",
    "coords": [
      [
        -34.805435,
        -55.922213
      ],
      [
        -34.807452,
        -55.920539
      ],
      [
        -34.806862,
        -55.920002
      ],
      [
        -34.805012,
        -55.921504
      ]
    ]
  },
  {
    "id": "J12|539",
    "territorio": "11",
    "coords": [
      [
        -34.806131,
        -55.920464
      ],
      [
        -34.805681,
        -55.919144
      ],
      [
        -34.806474,
        -55.918822
      ],
      [
        -34.806774,
        -55.919906
      ]
    ]
  },
  {
    "id": "J13|541",
    "territorio": "12",
    "coords": [
      [
        -34.806871,
        -55.919852
      ],
      [
        -34.806571,
        -55.918779
      ],
      [
        -34.808263,
        -55.918082
      ],
      [
        -34.808421,
        -55.918586
      ]
    ]
  },
  {
    "id": "J15|542",
    "territorio": "12",
    "coords": [
      [
        -34.807549,
        -55.920496
      ],
      [
        -34.806968,
        -55.919949
      ],
      [
        -34.808474,
        -55.918715
      ],
      [
        -34.808862,
        -55.919455
      ]
    ]
  },
  {
    "id": "J16|543",
    "territorio": "12",
    "coords": [
      [
        -34.80895,
        -55.91938
      ],
      [
        -34.808562,
        -55.91864
      ],
      [
        -34.809742,
        -55.917674
      ],
      [
        -34.810016,
        -55.917363
      ],
      [
        -34.810324,
        -55.917224
      ],
      [
        -34.810465,
        -55.917803
      ],
      [
        -34.810474,
        -55.918071
      ]
    ]
  },
  {
    "id": "J19|546",
    "territorio": "12",
    "coords": [
      [
        -34.810632,
        -55.917953
      ],
      [
        -34.810579,
        -55.917588
      ],
      [
        -34.810482,
        -55.91717
      ],
      [
        -34.811249,
        -55.916816
      ],
      [
        -34.811839,
        -55.917031
      ]
    ]
  },
  {
    "id": "888|38",
    "territorio": "12",
    "coords": [
      [
        -34.815785,
        -55.919842
      ],
      [
        -34.81427,
        -55.917192
      ],
      [
        -34.813372,
        -55.917739
      ],
      [
        -34.814112,
        -55.919069
      ],
      [
        -34.814552,
        -55.919477
      ],
      [
        -34.815177,
        -55.920367
      ]
    ]
  },
  {
    "id": "887|37",
    "territorio": "12",
    "coords": [
      [
        -34.814226,
        -55.917084
      ],
      [
        -34.813407,
        -55.915915
      ],
      [
        -34.812685,
        -55.916483
      ],
      [
        -34.813319,
        -55.917621
      ]
    ]
  },
  {
    "id": "883|33",
    "territorio": "12",
    "coords": [
      [
        -34.813336,
        -55.921869
      ],
      [
        -34.815098,
        -55.920421
      ],
      [
        -34.814323,
        -55.919402
      ],
      [
        -34.813521,
        -55.920324
      ],
      [
        -34.812729,
        -55.920914
      ]
    ]
  },
  {
    "id": "884|34",
    "territorio": "12",
    "coords": [
      [
        -34.812649,
        -55.920829
      ],
      [
        -34.811848,
        -55.91982
      ],
      [
        -34.812693,
        -55.919348
      ],
      [
        -34.813231,
        -55.919133
      ],
      [
        -34.813979,
        -55.91908
      ],
      [
        -34.814244,
        -55.919359
      ],
      [
        -34.813389,
        -55.920314
      ]
    ]
  },
  {
    "id": "885|35",
    "territorio": "12",
    "coords": [
      [
        -34.811742,
        -55.919745
      ],
      [
        -34.811125,
        -55.919048
      ],
      [
        -34.812086,
        -55.918264
      ],
      [
        -34.813266,
        -55.917771
      ],
      [
        -34.813935,
        -55.918972
      ],
      [
        -34.813433,
        -55.918994
      ],
      [
        -34.812658,
        -55.919219
      ]
    ]
  },
  {
    "id": "886|36",
    "territorio": "12",
    "coords": [
      [
        -34.810676,
        -55.918093
      ],
      [
        -34.812605,
        -55.916537
      ],
      [
        -34.813204,
        -55.917685
      ],
      [
        -34.812086,
        -55.918136
      ],
      [
        -34.811073,
        -55.918951
      ],
      [
        -34.810791,
        -55.918533
      ]
    ]
  },
  {
    "id": "871|21",
    "territorio": "12",
    "coords": [
      [
        -34.807963,
        -55.920346
      ],
      [
        -34.810526,
        -55.9182
      ],
      [
        -34.810685,
        -55.918683
      ],
      [
        -34.810932,
        -55.919091
      ],
      [
        -34.808527,
        -55.921193
      ],
      [
        -34.808271,
        -55.920925
      ]
    ]
  },
  {
    "id": "872|22",
    "territorio": "12",
    "coords": [
      [
        -34.808615,
        -55.921258
      ],
      [
        -34.81102,
        -55.919166
      ],
      [
        -34.811592,
        -55.919842
      ],
      [
        -34.809593,
        -55.921848
      ]
    ]
  },
  {
    "id": "873|23",
    "territorio": "12",
    "coords": [
      [
        -34.809716,
        -55.921901
      ],
      [
        -34.811698,
        -55.919895
      ],
      [
        -34.8125,
        -55.920914
      ],
      [
        -34.811451,
        -55.921462
      ],
      [
        -34.810421,
        -55.922524
      ]
    ]
  },
  {
    "id": "874|24",
    "territorio": "12",
    "coords": [
      [
        -34.811258,
        -55.923511
      ],
      [
        -34.810905,
        -55.922996
      ],
      [
        -34.810509,
        -55.922577
      ],
      [
        -34.811434,
        -55.921569
      ],
      [
        -34.812579,
        -55.921011
      ],
      [
        -34.813187,
        -55.921977
      ]
    ]
  },
  {
    "id": "196B|167",
    "territorio": "19",
    "coords": [
      [
        -34.799858,
        -55.905422
      ],
      [
        -34.800378,
        -55.904961
      ],
      [
        -34.801277,
        -55.90584
      ],
      [
        -34.800783,
        -55.906945
      ],
      [
        -34.800642,
        -55.906742
      ]
    ]
  },
  {
    "id": "216|57",
    "territorio": "19",
    "coords": [
      [
        -34.800493,
        -55.904896
      ],
      [
        -34.802616,
        -55.903158
      ],
      [
        -34.803136,
        -55.903641
      ],
      [
        -34.802554,
        -55.904746
      ],
      [
        -34.801347,
        -55.905744
      ]
    ]
  },
  {
    "id": "196|166",
    "territorio": "19",
    "coords": [
      [
        -34.80088,
        -55.907031
      ],
      [
        -34.801365,
        -55.905883
      ],
      [
        -34.802633,
        -55.906667
      ],
      [
        -34.802237,
        -55.908008
      ]
    ]
  },
  {
    "id": "215|56",
    "territorio": "19",
    "coords": [
      [
        -34.80147,
        -55.905797
      ],
      [
        -34.802651,
        -55.90481
      ],
      [
        -34.803215,
        -55.903705
      ],
      [
        -34.8034,
        -55.903866
      ],
      [
        -34.802695,
        -55.906527
      ],
      [
        -34.80207,
        -55.906259
      ]
    ]
  },
  {
    "id": "258|76",
    "territorio": "22",
    "coords": [
      [
        -34.802695,
        -55.903094
      ],
      [
        -34.804316,
        -55.901796
      ],
      [
        -34.804466,
        -55.901731
      ],
      [
        -34.804466,
        -55.903662
      ],
      [
        -34.804439,
        -55.904274
      ],
      [
        -34.80347,
        -55.90378
      ]
    ]
  },
  {
    "id": "214|75",
    "territorio": "19",
    "coords": [
      [
        -34.802792,
        -55.906559
      ],
      [
        -34.803506,
        -55.903888
      ],
      [
        -34.804052,
        -55.904242
      ],
      [
        -34.804422,
        -55.904371
      ],
      [
        -34.803823,
        -55.906806
      ],
      [
        -34.803153,
        -55.906688
      ]
    ]
  },
  {
    "id": "195|113",
    "territorio": "19",
    "coords": [
      [
        -34.802343,
        -55.908051
      ],
      [
        -34.802748,
        -55.906677
      ],
      [
        -34.803109,
        -55.906817
      ],
      [
        -34.803779,
        -55.906945
      ],
      [
        -34.803329,
        -55.908587
      ],
      [
        -34.803232,
        -55.90863
      ]
    ]
  },
  {
    "id": "256|523",
    "territorio": "22",
    "coords": [
      [
        -34.804651,
        -55.902826
      ],
      [
        -34.804642,
        -55.901796
      ],
      [
        -34.804756,
        -55.901399
      ],
      [
        -34.805655,
        -55.900948
      ],
      [
        -34.805752,
        -55.90215
      ],
      [
        -34.805884,
        -55.902708
      ],
      [
        -34.805734,
        -55.902869
      ]
    ]
  },
  {
    "id": "256B|81",
    "territorio": "22",
    "coords": [
      [
        -34.805981,
        -55.902654
      ],
      [
        -34.805849,
        -55.902107
      ],
      [
        -34.80577,
        -55.900927
      ],
      [
        -34.806413,
        -55.900573
      ],
      [
        -34.806985,
        -55.901903
      ]
    ]
  },
  {
    "id": "257|80",
    "territorio": "22",
    "coords": [
      [
        -34.804571,
        -55.904242
      ],
      [
        -34.804633,
        -55.903652
      ],
      [
        -34.804633,
        -55.902954
      ],
      [
        -34.805699,
        -55.902976
      ],
      [
        -34.805373,
        -55.904542
      ]
    ]
  },
  {
    "id": "256|610",
    "territorio": "20",
    "coords": [
      [
        -34.806043,
        -55.902793
      ],
      [
        -34.807047,
        -55.902021
      ],
      [
        -34.80791,
        -55.903662
      ],
      [
        -34.806924,
        -55.904456
      ]
    ]
  },
  {
    "id": "252|79",
    "territorio": "20",
    "coords": [
      [
        -34.805496,
        -55.904542
      ],
      [
        -34.805796,
        -55.902976
      ],
      [
        -34.805955,
        -55.902836
      ],
      [
        -34.806791,
        -55.904499
      ],
      [
        -34.806325,
        -55.904853
      ]
    ]
  },
  {
    "id": "255|74",
    "territorio": "20",
    "coords": [
      [
        -34.806994,
        -55.904585
      ],
      [
        -34.807998,
        -55.90378
      ],
      [
        -34.809091,
        -55.905873
      ],
      [
        -34.808025,
        -55.90657
      ]
    ]
  },
  {
    "id": "251|73",
    "territorio": "20",
    "coords": [
      [
        -34.806668,
        -55.907267
      ],
      [
        -34.807928,
        -55.906645
      ],
      [
        -34.806897,
        -55.904639
      ],
      [
        -34.806421,
        -55.904961
      ],
      [
        -34.806404,
        -55.90613
      ],
      [
        -34.806492,
        -55.906827
      ]
    ]
  },
  {
    "id": "248|72",
    "territorio": "21",
    "coords": [
      [
        -34.806289,
        -55.904939
      ],
      [
        -34.805461,
        -55.904671
      ],
      [
        -34.805179,
        -55.905712
      ],
      [
        -34.805091,
        -55.906237
      ],
      [
        -34.805109,
        -55.90686
      ],
      [
        -34.805347,
        -55.907375
      ],
      [
        -34.806413,
        -55.90686
      ],
      [
        -34.806307,
        -55.906227
      ]
    ]
  },
  {
    "id": "249|71",
    "territorio": "21",
    "coords": [
      [
        -34.803933,
        -55.906854
      ],
      [
        -34.804413,
        -55.905052
      ],
      [
        -34.804545,
        -55.904376
      ],
      [
        -34.805404,
        -55.904617
      ],
      [
        -34.805219,
        -55.905272
      ],
      [
        -34.80506,
        -55.905958
      ],
      [
        -34.805025,
        -55.906275
      ],
      [
        -34.805025,
        -55.906602
      ],
      [
        -34.80506,
        -55.906886
      ],
      [
        -34.804417,
        -55.906908
      ]
    ]
  },
  {
    "id": "70",
    "territorio": "21",
    "coords": [
      [
        -34.803453,
        -55.908619
      ],
      [
        -34.803911,
        -55.906919
      ],
      [
        -34.804329,
        -55.906962
      ],
      [
        -34.80466,
        -55.906972
      ],
      [
        -34.805082,
        -55.906956
      ],
      [
        -34.805285,
        -55.90746
      ],
      [
        -34.805435,
        -55.907933
      ],
      [
        -34.803572,
        -55.908855
      ],
      [
        -34.803484,
        -55.908818
      ],
      [
        -34.803444,
        -55.908726
      ]
    ]
  },
  {
    "id": "213|45",
    "territorio": "17",
    "coords": [
      [
        -34.803704,
        -55.908957
      ],
      [
        -34.803761,
        -55.908812
      ],
      [
        -34.805466,
        -55.908002
      ],
      [
        -34.805726,
        -55.908732
      ],
      [
        -34.805721,
        -55.908828
      ],
      [
        -34.805668,
        -55.908995
      ],
      [
        -34.805052,
        -55.909826
      ]
    ]
  },
  {
    "id": "247|183",
    "territorio": "17",
    "coords": [
      [
        -34.805109,
        -55.909848
      ],
      [
        -34.805734,
        -55.908979
      ],
      [
        -34.805774,
        -55.908802
      ],
      [
        -34.805704,
        -55.908453
      ],
      [
        -34.806787,
        -55.9079
      ],
      [
        -34.806871,
        -55.908115
      ],
      [
        -34.805915,
        -55.910357
      ]
    ]
  },
  {
    "id": "250|184",
    "territorio": "18",
    "coords": [
      [
        -34.806681,
        -55.907375
      ],
      [
        -34.808012,
        -55.906709
      ],
      [
        -34.808412,
        -55.907568
      ],
      [
        -34.80795,
        -55.907879
      ],
      [
        -34.80758,
        -55.908764
      ],
      [
        -34.806932,
        -55.908115
      ],
      [
        -34.806818,
        -55.907825
      ]
    ]
  },
  {
    "id": "254|186",
    "territorio": "18",
    "coords": [
      [
        -34.808465,
        -55.907525
      ],
      [
        -34.808051,
        -55.906683
      ],
      [
        -34.809179,
        -55.905937
      ],
      [
        -34.809575,
        -55.906752
      ]
    ]
  },
  {
    "id": "253|185",
    "territorio": "18",
    "coords": [
      [
        -34.808663,
        -55.908598
      ],
      [
        -34.808492,
        -55.907589
      ],
      [
        -34.809615,
        -55.906811
      ],
      [
        -34.809989,
        -55.90767
      ]
    ]
  },
  {
    "id": "314|189",
    "territorio": "18",
    "coords": [
      [
        -34.808848,
        -55.909617
      ],
      [
        -34.808681,
        -55.908678
      ],
      [
        -34.810038,
        -55.907723
      ],
      [
        -34.810412,
        -55.908555
      ],
      [
        -34.809271,
        -55.909376
      ],
      [
        -34.809051,
        -55.909874
      ]
    ]
  },
  {
    "id": "313|188",
    "territorio": "16",
    "coords": [
      [
        -34.809143,
        -55.909939
      ],
      [
        -34.809311,
        -55.909456
      ],
      [
        -34.810438,
        -55.908651
      ],
      [
        -34.810852,
        -55.909488
      ],
      [
        -34.809963,
        -55.910132
      ],
      [
        -34.809725,
        -55.910583
      ]
    ]
  },
  {
    "id": "315|190",
    "territorio": "18",
    "coords": [
      [
        -34.807672,
        -55.908769
      ],
      [
        -34.808007,
        -55.907922
      ],
      [
        -34.80843,
        -55.907675
      ],
      [
        -34.80858,
        -55.90863
      ],
      [
        -34.808386,
        -55.909156
      ]
    ]
  },
  {
    "id": "312",
    "territorio": "16",
    "coords": [
      [
        -34.809822,
        -55.910658
      ],
      [
        -34.810016,
        -55.910207
      ],
      [
        -34.810905,
        -55.909585
      ],
      [
        -34.811284,
        -55.910422
      ],
      [
        -34.810386,
        -55.911044
      ]
    ]
  },
  {
    "id": "246",
    "territorio": "17",
    "coords": [
      [
        -34.805999,
        -55.910379
      ],
      [
        -34.806915,
        -55.90819
      ],
      [
        -34.807523,
        -55.908877
      ],
      [
        -34.806677,
        -55.910786
      ]
    ]
  },
  {
    "id": "245|181",
    "territorio": "17",
    "coords": [
      [
        -34.806774,
        -55.910861
      ],
      [
        -34.807637,
        -55.908866
      ],
      [
        -34.807928,
        -55.90907
      ],
      [
        -34.808333,
        -55.909263
      ],
      [
        -34.807443,
        -55.911301
      ]
    ]
  },
  {
    "id": "244|180",
    "territorio": "16",
    "coords": [
      [
        -34.807558,
        -55.911355
      ],
      [
        -34.808412,
        -55.909295
      ],
      [
        -34.808553,
        -55.909424
      ],
      [
        -34.808985,
        -55.90996
      ],
      [
        -34.808245,
        -55.911773
      ]
    ]
  },
  {
    "id": "243|179",
    "territorio": "16",
    "coords": [
      [
        -34.808333,
        -55.911827
      ],
      [
        -34.809064,
        -55.910046
      ],
      [
        -34.809672,
        -55.910722
      ],
      [
        -34.808994,
        -55.912267
      ]
    ]
  },
  {
    "id": "242|178",
    "territorio": "16",
    "coords": [
      [
        -34.809099,
        -55.912331
      ],
      [
        -34.809751,
        -55.910776
      ],
      [
        -34.810324,
        -55.911151
      ],
      [
        -34.809654,
        -55.912675
      ]
    ]
  },
  {
    "id": "156|228",
    "territorio": "15",
    "coords": [
      [
        -34.796704,
        -55.910207
      ],
      [
        -34.796484,
        -55.909435
      ],
      [
        -34.797638,
        -55.90789
      ],
      [
        -34.798079,
        -55.909177
      ]
    ]
  },
  {
    "id": "162|232",
    "territorio": "15",
    "coords": [
      [
        -34.798158,
        -55.909081
      ],
      [
        -34.797709,
        -55.907793
      ],
      [
        -34.798687,
        -55.906527
      ],
      [
        -34.799524,
        -55.908083
      ]
    ]
  },
  {
    "id": "185|235",
    "territorio": "15",
    "coords": [
      [
        -34.798766,
        -55.90643
      ],
      [
        -34.799418,
        -55.905819
      ],
      [
        -34.800264,
        -55.907246
      ],
      [
        -34.800554,
        -55.907578
      ],
      [
        -34.79962,
        -55.908018
      ]
    ]
  },
  {
    "id": "155|227",
    "territorio": "15",
    "coords": [
      [
        -34.796925,
        -55.910851
      ],
      [
        -34.796757,
        -55.910336
      ],
      [
        -34.798114,
        -55.909295
      ],
      [
        -34.798369,
        -55.910143
      ]
    ]
  },
  {
    "id": "161|231",
    "territorio": "15",
    "coords": [
      [
        -34.798466,
        -55.910068
      ],
      [
        -34.798202,
        -55.909199
      ],
      [
        -34.799603,
        -55.908179
      ],
      [
        -34.800017,
        -55.908415
      ],
      [
        -34.800237,
        -55.908694
      ],
      [
        -34.800484,
        -55.909081
      ]
    ]
  },
  {
    "id": "163|233",
    "territorio": "15",
    "coords": [
      [
        -34.799735,
        -55.908093
      ],
      [
        -34.800642,
        -55.907675
      ],
      [
        -34.801012,
        -55.907975
      ],
      [
        -34.801823,
        -55.90849
      ],
      [
        -34.800625,
        -55.909059
      ],
      [
        -34.800413,
        -55.908726
      ],
      [
        -34.800228,
        -55.908448
      ],
      [
        -34.800087,
        -55.908297
      ]
    ]
  },
  {
    "id": "154|226",
    "territorio": "15",
    "coords": [
      [
        -34.797277,
        -55.911999
      ],
      [
        -34.79696,
        -55.910969
      ],
      [
        -34.798413,
        -55.91025
      ],
      [
        -34.798739,
        -55.911258
      ]
    ]
  },
  {
    "id": "160|230",
    "territorio": "15",
    "coords": [
      [
        -34.798845,
        -55.911205
      ],
      [
        -34.79851,
        -55.910164
      ],
      [
        -34.800572,
        -55.909177
      ],
      [
        -34.800898,
        -55.910175
      ]
    ]
  },
  {
    "id": "184|234",
    "territorio": "15",
    "coords": [
      [
        -34.800977,
        -55.9101
      ],
      [
        -34.800669,
        -55.909166
      ],
      [
        -34.80192,
        -55.908566
      ],
      [
        -34.80288,
        -55.909156
      ],
      [
        -34.802695,
        -55.909295
      ]
    ]
  },
  {
    "id": "180B|52",
    "territorio": "15",
    "coords": [
      [
        -34.79733,
        -55.912117
      ],
      [
        -34.798792,
        -55.911398
      ],
      [
        -34.799057,
        -55.912117
      ],
      [
        -34.799312,
        -55.912535
      ],
      [
        -34.799021,
        -55.913275
      ],
      [
        -34.797488,
        -55.912675
      ]
    ]
  },
  {
    "id": "183|53",
    "territorio": "15",
    "coords": [
      [
        -34.798889,
        -55.911323
      ],
      [
        -34.800942,
        -55.910271
      ],
      [
        -34.801321,
        -55.911441
      ],
      [
        -34.801056,
        -55.911537
      ],
      [
        -34.799488,
        -55.912364
      ],
      [
        -34.799391,
        -55.912471
      ],
      [
        -34.799118,
        -55.911956
      ]
    ]
  },
  {
    "id": "183B|612",
    "territorio": "15",
    "coords": [
      [
        -34.801435,
        -55.911419
      ],
      [
        -34.80133,
        -55.911012
      ],
      [
        -34.801021,
        -55.910239
      ],
      [
        -34.802818,
        -55.909359
      ],
      [
        -34.802968,
        -55.909209
      ],
      [
        -34.803091,
        -55.909413
      ],
      [
        -34.802448,
        -55.911816
      ]
    ]
  },
  {
    "id": "182|42",
    "territorio": "15",
    "coords": [
      [
        -34.800986,
        -55.91378
      ],
      [
        -34.80192,
        -55.914102
      ],
      [
        -34.802413,
        -55.911967
      ],
      [
        -34.801444,
        -55.91158
      ]
    ]
  },
  {
    "id": "182B|49",
    "territorio": "15",
    "coords": [
      [
        -34.799479,
        -55.912524
      ],
      [
        -34.79962,
        -55.912396
      ],
      [
        -34.801206,
        -55.911602
      ],
      [
        -34.80133,
        -55.911537
      ],
      [
        -34.800924,
        -55.913469
      ],
      [
        -34.800202,
        -55.913318
      ],
      [
        -34.799858,
        -55.913018
      ]
    ]
  },
  {
    "id": "180|50",
    "territorio": "15",
    "coords": [
      [
        -34.799153,
        -55.914155
      ],
      [
        -34.799083,
        -55.91378
      ],
      [
        -34.799074,
        -55.913361
      ],
      [
        -34.799242,
        -55.912932
      ],
      [
        -34.799383,
        -55.912621
      ],
      [
        -34.799629,
        -55.912932
      ],
      [
        -34.800131,
        -55.913361
      ],
      [
        -34.799999,
        -55.914026
      ],
      [
        -34.799691,
        -55.913994
      ]
    ]
  },
  {
    "id": "153|51",
    "territorio": "15",
    "coords": [
      [
        -34.797568,
        -55.912793
      ],
      [
        -34.798986,
        -55.913426
      ],
      [
        -34.798977,
        -55.913769
      ],
      [
        -34.799048,
        -55.914209
      ],
      [
        -34.798158,
        -55.914745
      ]
    ]
  },
  {
    "id": "152|39",
    "territorio": "15",
    "coords": [
      [
        -34.79822,
        -55.914842
      ],
      [
        -34.799101,
        -55.914327
      ],
      [
        -34.799709,
        -55.915958
      ],
      [
        -34.799074,
        -55.916537
      ],
      [
        -34.798387,
        -55.915293
      ]
    ]
  },
  {
    "id": "178|622",
    "territorio": "15",
    "coords": [
      [
        -34.800537,
        -55.916001
      ],
      [
        -34.800933,
        -55.914059
      ],
      [
        -34.801885,
        -55.914348
      ],
      [
        -34.801488,
        -55.91628
      ]
    ]
  },
  {
    "id": "179|621",
    "territorio": "15",
    "coords": [
      [
        -34.799832,
        -55.915947
      ],
      [
        -34.799171,
        -55.914284
      ],
      [
        -34.799682,
        -55.914134
      ],
      [
        -34.800052,
        -55.914155
      ],
      [
        -34.800748,
        -55.914338
      ],
      [
        -34.800413,
        -55.91599
      ]
    ]
  },
  {
    "id": "151B|38",
    "territorio": "15",
    "coords": [
      [
        -34.799145,
        -55.916634
      ],
      [
        -34.799823,
        -55.916054
      ],
      [
        -34.800175,
        -55.916086
      ],
      [
        -34.800501,
        -55.918189
      ],
      [
        -34.800114,
        -55.918382
      ]
    ]
  },
  {
    "id": "151C|37",
    "territorio": "15",
    "coords": [
      [
        -34.800625,
        -55.9182
      ],
      [
        -34.800255,
        -55.916065
      ],
      [
        -34.800493,
        -55.916108
      ],
      [
        -34.80147,
        -55.916408
      ],
      [
        -34.8011,
        -55.918307
      ]
    ]
  },
  {
    "id": "177|162",
    "territorio": "14",
    "coords": [
      [
        -34.801268,
        -55.919745
      ],
      [
        -34.801021,
        -55.919391
      ],
      [
        -34.801241,
        -55.918415
      ],
      [
        -34.802175,
        -55.918436
      ],
      [
        -34.802378,
        -55.919369
      ]
    ]
  },
  {
    "id": "F17|613",
    "territorio": "14",
    "coords": [
      [
        -34.802475,
        -55.919305
      ],
      [
        -34.802272,
        -55.918415
      ],
      [
        -34.80377,
        -55.917943
      ],
      [
        -34.803964,
        -55.918736
      ]
    ]
  },
  {
    "id": "F16|615",
    "territorio": "14",
    "coords": [
      [
        -34.804069,
        -55.918683
      ],
      [
        -34.803858,
        -55.917889
      ],
      [
        -34.804334,
        -55.917524
      ],
      [
        -34.805038,
        -55.91717
      ],
      [
        -34.805902,
        -55.916827
      ],
      [
        -34.806148,
        -55.917814
      ]
    ]
  },
  {
    "id": "J11|538",
    "territorio": "14",
    "coords": [
      [
        -34.804325,
        -55.919648
      ],
      [
        -34.804096,
        -55.918801
      ],
      [
        -34.806192,
        -55.91791
      ],
      [
        -34.806413,
        -55.918747
      ]
    ]
  },
  {
    "id": "J4|531",
    "territorio": "14",
    "coords": [
      [
        -34.802713,
        -55.920271
      ],
      [
        -34.802501,
        -55.919412
      ],
      [
        -34.803999,
        -55.918854
      ],
      [
        -34.804201,
        -55.919691
      ]
    ]
  },
  {
    "id": "J3|530",
    "territorio": "14",
    "coords": [
      [
        -34.801118,
        -55.92011
      ],
      [
        -34.801197,
        -55.919906
      ],
      [
        -34.802413,
        -55.919455
      ],
      [
        -34.802607,
        -55.920303
      ],
      [
        -34.802202,
        -55.920442
      ]
    ]
  },
  {
    "id": "F15|616",
    "territorio": "14",
    "coords": [
      [
        -34.803814,
        -55.917782
      ],
      [
        -34.804457,
        -55.917299
      ],
      [
        -34.805849,
        -55.916709
      ],
      [
        -34.805426,
        -55.915582
      ],
      [
        -34.804554,
        -55.916301
      ],
      [
        -34.804413,
        -55.916204
      ],
      [
        -34.804818,
        -55.915174
      ],
      [
        -34.804334,
        -55.914938
      ],
      [
        -34.804193,
        -55.915228
      ],
      [
        -34.803365,
        -55.91687
      ],
      [
        -34.803699,
        -55.91746
      ]
    ]
  },
  {
    "id": "190|163",
    "territorio": "14",
    "coords": [
      [
        -34.802316,
        -55.918264
      ],
      [
        -34.803708,
        -55.917835
      ],
      [
        -34.803276,
        -55.916902
      ],
      [
        -34.802704,
        -55.916805
      ]
    ]
  },
  {
    "id": "177B|623",
    "territorio": "14",
    "coords": [
      [
        -34.801268,
        -55.918329
      ],
      [
        -34.802175,
        -55.918307
      ],
      [
        -34.802616,
        -55.916762
      ],
      [
        -34.80162,
        -55.916462
      ]
    ]
  },
  {
    "id": "181|614",
    "territorio": "14",
    "coords": [
      [
        -34.801647,
        -55.916333
      ],
      [
        -34.802061,
        -55.914348
      ],
      [
        -34.802995,
        -55.914595
      ],
      [
        -34.802748,
        -55.91584
      ],
      [
        -34.802642,
        -55.916666
      ]
    ]
  },
  {
    "id": "191|164",
    "territorio": "14",
    "coords": [
      [
        -34.802757,
        -55.916677
      ],
      [
        -34.802854,
        -55.915915
      ],
      [
        -34.803109,
        -55.914617
      ],
      [
        -34.804201,
        -55.914906
      ],
      [
        -34.803276,
        -55.916816
      ]
    ]
  },
  {
    "id": "193|34",
    "territorio": "14",
    "coords": [
      [
        -34.802087,
        -55.914209
      ],
      [
        -34.802563,
        -55.911999
      ],
      [
        -34.803162,
        -55.912353
      ],
      [
        -34.803136,
        -55.913136
      ],
      [
        -34.80303,
        -55.914456
      ]
    ]
  },
  {
    "id": "194|47",
    "territorio": "14",
    "coords": [
      [
        -34.802607,
        -55.911881
      ],
      [
        -34.803232,
        -55.90952
      ],
      [
        -34.803338,
        -55.909402
      ],
      [
        -34.804043,
        -55.909907
      ],
      [
        -34.803206,
        -55.912246
      ]
    ]
  },
  {
    "id": "192|165",
    "territorio": "14",
    "coords": [
      [
        -34.803127,
        -55.914477
      ],
      [
        -34.803224,
        -55.913554
      ],
      [
        -34.80325,
        -55.912406
      ],
      [
        -34.804254,
        -55.912964
      ],
      [
        -34.804219,
        -55.91481
      ]
    ]
  },
  {
    "id": "F1|207",
    "territorio": "14",
    "coords": [
      [
        -34.803312,
        -55.912278
      ],
      [
        -34.804131,
        -55.909917
      ],
      [
        -34.804871,
        -55.910422
      ],
      [
        -34.804316,
        -55.911763
      ],
      [
        -34.804237,
        -55.912825
      ]
    ]
  },
  {
    "id": "F14|619",
    "territorio": "14",
    "coords": [
      [
        -34.804342,
        -55.91481
      ],
      [
        -34.804342,
        -55.913018
      ],
      [
        -34.804845,
        -55.913297
      ],
      [
        -34.805444,
        -55.913694
      ],
      [
        -34.804871,
        -55.915099
      ]
    ]
  },
  {
    "id": "F2|208",
    "territorio": "14",
    "coords": [
      [
        -34.804351,
        -55.912889
      ],
      [
        -34.804386,
        -55.91187
      ],
      [
        -34.804977,
        -55.910465
      ],
      [
        -34.805646,
        -55.910904
      ],
      [
        -34.804765,
        -55.913115
      ]
    ]
  },
  {
    "id": "F3|209",
    "territorio": "14",
    "coords": [
      [
        -34.804845,
        -55.913136
      ],
      [
        -34.805743,
        -55.910904
      ],
      [
        -34.806413,
        -55.911398
      ],
      [
        -34.805505,
        -55.913576
      ]
    ]
  },
  {
    "id": "F4|210",
    "territorio": "13",
    "coords": [
      [
        -34.805611,
        -55.91363
      ],
      [
        -34.806536,
        -55.911409
      ],
      [
        -34.807223,
        -55.911891
      ],
      [
        -34.80621,
        -55.91423
      ]
    ]
  },
  {
    "id": "F5|211",
    "territorio": "13",
    "coords": [
      [
        -34.806298,
        -55.914295
      ],
      [
        -34.807311,
        -55.911934
      ],
      [
        -34.807981,
        -55.912342
      ],
      [
        -34.806924,
        -55.914917
      ]
    ]
  },
  {
    "id": "F6|212",
    "territorio": "13",
    "coords": [
      [
        -34.807003,
        -55.914981
      ],
      [
        -34.808069,
        -55.912406
      ],
      [
        -34.808756,
        -55.912836
      ],
      [
        -34.80769,
        -55.915346
      ],
      [
        -34.807294,
        -55.915185
      ]
    ]
  },
  {
    "id": "F7|213",
    "territorio": "13",
    "coords": [
      [
        -34.807805,
        -55.915368
      ],
      [
        -34.808835,
        -55.9129
      ],
      [
        -34.809549,
        -55.913361
      ],
      [
        -34.80865,
        -55.915378
      ]
    ]
  },
  {
    "id": "F8|214",
    "territorio": "13",
    "coords": [
      [
        -34.808774,
        -55.915346
      ],
      [
        -34.809628,
        -55.913372
      ],
      [
        -34.810297,
        -55.913812
      ],
      [
        -34.809769,
        -55.915024
      ],
      [
        -34.809064,
        -55.915303
      ]
    ]
  },
  {
    "id": "F9|215",
    "territorio": "13",
    "coords": [
      [
        -34.809972,
        -55.914938
      ],
      [
        -34.810438,
        -55.913866
      ],
      [
        -34.811064,
        -55.914316
      ],
      [
        -34.810852,
        -55.914606
      ]
    ]
  },
  {
    "id": "F10|216",
    "territorio": "13",
    "coords": [
      [
        -34.809945,
        -55.915099
      ],
      [
        -34.810914,
        -55.914702
      ],
      [
        -34.811178,
        -55.914348
      ],
      [
        -34.812385,
        -55.915132
      ],
      [
        -34.810174,
        -55.916065
      ]
    ]
  },
  {
    "id": "J21|528",
    "territorio": "13",
    "coords": [
      [
        -34.811434,
        -55.915668
      ],
      [
        -34.8125,
        -55.915217
      ],
      [
        -34.813107,
        -55.915604
      ],
      [
        -34.81331,
        -55.915786
      ],
      [
        -34.812711,
        -55.916247
      ]
    ]
  },
  {
    "id": "J20|547",
    "territorio": "13",
    "coords": [
      [
        -34.811945,
        -55.916923
      ],
      [
        -34.812658,
        -55.916312
      ],
      [
        -34.81124,
        -55.915754
      ],
      [
        -34.810209,
        -55.916194
      ],
      [
        -34.810447,
        -55.917052
      ],
      [
        -34.811222,
        -55.916709
      ]
    ]
  },
  {
    "id": "F13|618",
    "territorio": "13",
    "coords": [
      [
        -34.805505,
        -55.915529
      ],
      [
        -34.805884,
        -55.915164
      ],
      [
        -34.806219,
        -55.91437
      ],
      [
        -34.806791,
        -55.914971
      ],
      [
        -34.807126,
        -55.915217
      ],
      [
        -34.807637,
        -55.915453
      ],
      [
        -34.806783,
        -55.916108
      ],
      [
        -34.806175,
        -55.916537
      ],
      [
        -34.805963,
        -55.916655
      ],
      [
        -34.805734,
        -55.915968
      ]
    ]
  },
  {
    "id": "J12|617",
    "territorio": "13",
    "coords": [
      [
        -34.806254,
        -55.917749
      ],
      [
        -34.80599,
        -55.916784
      ],
      [
        -34.806439,
        -55.916516
      ],
      [
        -34.806976,
        -55.91614
      ],
      [
        -34.807637,
        -55.915636
      ],
      [
        -34.807998,
        -55.917009
      ]
    ]
  },
  {
    "id": "J13|540",
    "territorio": "13",
    "coords": [
      [
        -34.806527,
        -55.918683
      ],
      [
        -34.806298,
        -55.917878
      ],
      [
        -34.808016,
        -55.917149
      ],
      [
        -34.808227,
        -55.917953
      ]
    ]
  },
  {
    "id": "F11|611",
    "territorio": "13",
    "coords": [
      [
        -34.808095,
        -55.916955
      ],
      [
        -34.807725,
        -55.915571
      ],
      [
        -34.807866,
        -55.915496
      ],
      [
        -34.808351,
        -55.915529
      ],
      [
        -34.808914,
        -55.915464
      ],
      [
        -34.809223,
        -55.915368
      ],
      [
        -34.809787,
        -55.915164
      ],
      [
        -34.810016,
        -55.916119
      ]
    ]
  },
  {
    "id": "J18|545",
    "territorio": "13",
    "coords": [
      [
        -34.808324,
        -55.9179
      ],
      [
        -34.80813,
        -55.917084
      ],
      [
        -34.810051,
        -55.916247
      ],
      [
        -34.810289,
        -55.917138
      ],
      [
        -34.80961,
        -55.917374
      ]
    ]
  }
];
      /*************** UTILIDADES ***************/
      function diferenciaEnMeses(a, b) {
        return (
          (b.getFullYear() - a.getFullYear()) * 12 +
          (b.getMonth() - a.getMonth())
        );
      }
      function quitarTildes(s) {
        return s.normalize?.("NFD").replace(/\p{Diacritic}/gu, "") || s;
      }
      function parseCSVLine(line) {
        const out = [];
        let cur = "",
          inQ = false;
        for (let i = 0; i < line.length; i++) {
          const ch = line[i];
          if (ch === '"') {
            if (inQ && line[i + 1] === '"') {
              cur += '"';
              i++;
            } else {
              inQ = !inQ;
            }
          } else if (ch === "," && !inQ) {
            out.push(cur);
            cur = "";
          } else {
            cur += ch;
          }
        }
        out.push(cur);
        return out;
      }
      function parseFechaSeguro(s) {
        s = String(s || "").trim();
        if (!s) return new Date("Invalid");
        const d1 = new Date(s);
        if (!isNaN(d1)) return d1;
        const m = s.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})$/);
        if (m) return new Date(+m[3], +m[2] - 1, +m[1]);
        return new Date("Invalid");
      }
      function normalizarFinalizado(v) {
        const s = String(v ?? "")
          .trim()
          .toLowerCase();
        if (!s) return "";
        if (
          [
            "si",
            "s칤",
            "s",
            "true",
            "1",
            "ok",
            "finalizado",
            "completo",
            "terminado",
          ].includes(s)
        )
          return "Si";
        if (["no", "n", "false", "0", "pendiente", "incompleto"].includes(s))
          return "No";
        return s;
      }
      function obtenerColor(cantidad, finalizado) {
        // Sin fecha v치lida => gris
        //if (isNaN(cantidad)) return "gray";
      
        const fin = String(finalizado ?? "").trim().toLowerCase();
        const esSi =
          ["si","s칤","true","1","ok","finalizado","completo","terminado"].includes(fin) || finalizado === true;
        console.log(cantidad + " - " + finalizado)
        if (cantidad === 0 && !esSi) return "gray";
        if (cantidad === 1 && !esSi) return "blue";
        if (cantidad === 1 &&  esSi) return "green";
        if (cantidad === 2) return "yellow";
        if (cantidad === 3) return "red";
        if (cantidad > 3) return "bordo";
        return "gray";
      }
      function actualizarContadores() {
        document.getElementById("contador-azul").textContent = contadores.blue;
        document.getElementById("contador-verde").textContent =
          contadores.green;
        document.getElementById("contador-amarillo").textContent =
          contadores.yellow;
        document.getElementById("contador-rojo").textContent = contadores.red;
      }

            // === AUTH CLIENT ===
      const AUTH = {
        get token() { return localStorage.getItem('auth_token') || ''; },
        set token(v){ localStorage.setItem('auth_token', v || ''); },
        get user()  { return localStorage.getItem('auth_user') || ''; },
        set user(v) { localStorage.setItem('auth_user', v || ''); },
        isLoggedIn(){ return !!this.token; },
        logout(){ localStorage.removeItem('auth_token'); localStorage.removeItem('auth_user'); }
      };

      async function login(usuario, password){
        const body = new URLSearchParams();
        body.set('action','login');
        body.set('usuario', usuario.trim().toLowerCase());
        body.set('password', password);
        const res = await fetch(WEBHOOK_URL, {
          method: 'POST',
          headers: { 'Content-Type':'application/x-www-form-urlencoded;charset=utf-8' },
          body
        });
        const data = await res.json().catch(()=>({}));
        if (!res.ok || !data.ok) throw new Error(data.error || 'Login fall칩');
        AUTH.token = data.token;
        AUTH.user  = data.usuario;
        return data;
      }

      async function requireLoginThen(next){
        if (AUTH.isLoggedIn()) { next(); return; }
        openLoginModal(async ({usuario, password, close}) => {
          try {
            await login(usuario, password);
            close();
            showToast('Sesi칩n iniciada');
            next();
          } catch(e){
            alert('Error: ' + e.message);
          }
        });
      }

      /*************** FETCH CSV ROBUSTO (con fallbacks CORS) ***************/
      async function fetchTextWithFallback(sheetCsvUrl) {
        // Intento directo (sirve si us치s Live Server/localhost y Google permite CORS)
        try {
          const res = await fetch(sheetCsvUrl, {
            redirect: "follow",
            headers: { Accept: "text/csv" },
          });
          if (res.ok) {
            const txt = await res.text();
            if (txt && txt.trim() !== "") return txt;
          }
        } catch (_) {}

        // Proxies p칰blicos (ordenados por confiabilidad percibida)
        const candidates = [
          // AllOrigins
          "https://api.allorigins.win/raw?url=" +
            encodeURIComponent(sheetCsvUrl),
          // cors.isomorphic-git.org
          "https://cors.isomorphic-git.org/" + sheetCsvUrl,
          // r.jina.ai (http/https)
          "https://r.jina.ai/http://" + sheetCsvUrl.replace(/^https?:\/\//, ""),
          "https://r.jina.ai/https://" +
            sheetCsvUrl.replace(/^https?:\/\//, ""),
        ];

        for (const url of candidates) {
          try {
            const res = await fetch(url, { redirect: "follow" });
            if (res.ok) {
              const txt = await res.text();
              if (txt && txt.trim() !== "") return txt;
            }
          } catch (e) {
            console.warn("Proxy fall칩:", url, e);
          }
        }

        throw new Error(
          "No se pudo obtener el CSV (CORS/proxy). Sugerencia: serv칤 el HTML en http://localhost y/o crea un WebApp en Apps Script como proxy."
        );
      }

      function indicesPorEncabezado(headers) {
        const norm = headers.map((h) =>
          quitarTildes(
            String(h || "")
              .trim()
              .toLowerCase()
          )
        );
        const lookup = (...aliases) => {
          const aliNorm = aliases.map((a) => quitarTildes(a.toLowerCase()));
          for (let i = 0; i < norm.length; i++)
            if (aliNorm.includes(norm[i])) return i;
          return -1;
        };
        return {
          id: lookup("id", "identificador", "territorio"),
          fecha: lookup(
            "ultima fecha",
            "칰ltima fecha",
            "fecha",
            "fecha ultima",
            "fecha 칰ltima"
          ),
          finalizado: lookup(
            "finalizado",
            "se finalizo el territorio",
            "se finaliz칩 el territorio",
            "쯥e finaliz칩?",
            "se finalizo",
            "se finaliz칩",
            "estado"
          ),
        };
      }

      async function cargarDatosDesdeSheets() {
  try {
    const csvData = await fetchTextWithFallback(SHEET_CSV); // sigue usando tus fallbacks
    const filas = csvData.split(/\r?\n/).filter(l => l.trim() !== "");
    console.log(filas);
    if (filas.length === 0) return [];

    const headerCols = parseCSVLine(filas[0]);
    let start = 0;

    // 칈ndices por defecto (por si no hay encabezados)
    let idxId = 0, idxFecha = -1, idxFin = -1, idxCantidad = -1;

    // 쯊iene encabezados?
    const joined = headerCols.join(",").toLowerCase();
    
    const looksHeader = /id|cantidad|finalizado/.test(joined);
    if (looksHeader) {
      // Intentamos mapear
      const map = headerCols.map(c => String(c || "").toLowerCase().trim());

      // ID
      idxId = map.findIndex(x =>
        x === "id" || x.includes("territorio")
      );
      if (idxId < 0) idxId = 0; // fallback
      // Cantidad (nuevo)
      idxCantidad = map.findIndex(x =>
        x === "cantidad" || x.includes("veces")
      ); // puede quedar en -1
      // Finalizado (opcional pero deseable)
      idxFin = map.findIndex(x =>
        x.includes("finalizado")
      ); // puede quedar en -1



      start = 1;
    }

    const datos = [];
    for (let i = start; i < filas.length; i++) {
      const cols = parseCSVLine(filas[i]);

      const idStr = (cols[idxId] ?? "").trim();
      if (!idStr) continue;

      // id: preservar texto si no es puramente num칠rico
      const id = (/^\d+$/.test(idStr) ? parseInt(idStr, 10) : idStr);

      // fecha: s칩lo si hay columna de fecha mapeada
      let fecha = null;
      if (idxFecha >= 0) {
        const fechaStr = (cols[idxFecha] ?? "").trim();
        const f = parseFechaSeguro(fechaStr);
        fecha = (f instanceof Date && !isNaN(f)) ? f : null;
      }

      // finalizado (si existe columna)
      let finalizado = "";
      if (idxFin >= 0) {
        const finStr = (cols[idxFin] ?? "").trim();
        finalizado = normalizarFinalizado(finStr);
      }

      // cantidad (si existe columna)
      let cantidad = null;
      if (idxCantidad >= 0) {
        const cantidadStr = (cols[idxCantidad] ?? "").trim();
        const n = parseInt(cantidadStr, 10);
        cantidad = Number.isFinite(n) ? n : null;
      }

      // 游댐 Empujar SIEMPRE que haya ID.
      //    La fecha es opcional (puede quedar null en la nueva hoja).
      datos.push({ id, cantidad, finalizado});
    }
    console.log(datos);
    return datos;
  } catch (error) {
    console.error("Error cargando datos desde Google Sheets:", error);
    return [];
  }
}


      /*************** UI: panel info ***************/
      const infoPanel = document.getElementById("info-panel");
      const polygonId = document.getElementById("polygon-id");
      const polygonFecha = document.getElementById("polygon-fecha");
      const layerById = new Map();
      const dataById  = new Map();
      function idKey(x){ return normalizarId(x); }
      const READ_CSV_URL = (typeof SHEET_CSV !== "undefined" && SHEET_CSV) ? SHEET_CSV : "";
      const WEBHOOK_URL = "https://script.google.com/macros/s/AKfycbweVDu_2Vn0ygEMQdkgqbVprTKJ2kjAT--Wimo0cVTaASLK3-yJMkt175DJq-pky1Y/exec";
  
  
      function parseFecha(s){
        if(!s) return null;
        const t = String(s).trim();
        const d1 = new Date(t); if(!isNaN(d1)) return d1;
        const m = t.match(/^([0-3]?\d)[\/\-]([0-1]?\d)[\/\-](\d{4})$/);
        if(m){ const [_,dd,mm,yy]=m; return new Date(parseInt(yy), parseInt(mm)-1, parseInt(dd)); }
        const m2 = t.match(/^(\d{4})[\/\-]([0-1]?\d)[\/\-]([0-3]?\d)$/);
        if(m2){ const [_,yy,mm,dd]=m2; return new Date(parseInt(yy), parseInt(mm)-1, parseInt(dd)); }
        return null;
      }
    function normalizarFinalizado(v){
      const s = String(v ?? '').trim().toLowerCase();
      if(!s) return '';
      if(['si','s칤','s','true','1','ok','finalizado','completo','terminado'].includes(s)) return 'Si';
      if(['no','n','false','0','pendiente','incompleto','en curso','trabajando'].includes(s)) return 'No';
      return s;
    }

    function estiloPorKey(key){
      const base = { color:'#333', weight:1, fillOpacity:0.35 };
      if(key==='blue')   return { ...base, fillColor:'#3388ff' };
      if(key==='green')  return { ...base, fillColor:'#2e7d32' };
      if(key==='yellow') return { ...base, fillColor:'#ffd500' };
      if(key==='red')    return { ...base, fillColor:'#b53a22' };
      if(key==='gray')   return { ...base, fillColor:'#9e9e9e' }; //  NUEVO
      return { ...base, fillColor:'#90caf9' };
    }
      /*************** CARGA DEL MAPA ***************/
      async function cargarMapa() {
        const datosSheets = await cargarDatosDesdeSheets();

        contadores = { blue: 0, green: 0, yellow: 0, red: 0 };

        poligonos.forEach((p) => {
          // 游댢 match por string para evitar "32" vs 32
          const dato = datosSheets.find((d) => normalizarId(d.id) === normalizarId(p.id));
          p.cantidad = dato ? dato.cantidad : 0;
          p.finalizado = dato ? dato.finalizado : "";

          const colorInicial = obtenerColor(p.cantidad, p.finalizado);
          if (contadores[colorInicial] != null) contadores[colorInicial]++;

          const poly = L.polygon(p.coords, {
            color: "black",
            fillColor: colorInicial,
            fillOpacity: 0.5,
          }).addTo(map);

          const tooltipContent = `
          <div class="tooltip-content">
            <div><strong>${p.id}</strong></div>
          </div>
        `;
          poly.bindTooltip(tooltipContent, {
            permanent: true,
            direction: "center",
            className: "label",
          });

          poly.on("click", function () {
            abrirForm(p);
            /*infoPanel.style.display = "block";
            polygonId.textContent = p.id;
            polygonFecha.textContent =
              (p.fecha instanceof Date && !isNaN(p.fecha))
                ? p.fecha.toLocaleDateString()
                : "No hay datos";*/

          });
        });

        //actualizarContadores();
      }

      function repintarContadores(){
        const ids = { blue:'contador-azul', green:'contador-verde', yellow:'contador-amarillo', red:'contador-rojo' };
        for(const k of Object.keys(ids)){
          const el = document.getElementById(ids[k]);
          if(el) el.textContent = String(contadores[k]||0);
        }
      }

      function abrirForm(p){
        console.log("abrirForm");
        const textContent =
              (p.fecha instanceof Date && !isNaN(p.fecha))
                ? p.fecha.toLocaleDateString()
                : "No hay datos";
        const titulo = `Registrar territorio ${p.territorio || p.id} - 칔ltima visita: ${textContent}`;
        showModal(formHTML(p.id, { capitan:p.capitan||'', estado:p.finalizado||'Si', fechaValida:p.fecha||new Date(), comentario:p.comentario||'' }), titulo);
        document.getElementById(`cancel-${p.id}`).onclick = hideModal;
        document.getElementById(`save-${p.id}`).onclick = async () => {
          const cap = (document.getElementById(`cap-${p.id}`)?.value || '').trim();
          const est = (document.getElementById(`est-${p.id}`)?.value || 'Si');
          const com = (document.getElementById(`com-${p.id}`)?.value || '').trim();
          const dateStr = (document.getElementById(`fec-${p.id}`)?.value || '').trim();
          const fechaISO = dateStr ? new Date(dateStr + 'T00:00:00').toISOString() : new Date().toISOString();
          const rec = { id:p.id, territorio:String(p.territorio ?? p.id), capitan:cap, estado:est, finalizado:est, fecha:fechaISO, comentario:com };
          const res = await enviarAlSheet(rec);
          if(res.ok) showToast(`Guardado (ID ${p.id}) v칤a ${res.via}.`); else showToast(`Guardado local (sin enviar): ${res.reason || 'error'}`);
          p.capitan = cap; p.finalizado = normalizarFinalizado(est); p.fecha = new Date(fechaISO); p.comentario = com;
          repintarUno(p);
          hideModal();
          document.dispatchEvent(new CustomEvent('territorio:guardado', { detail:{ record: rec } }));
          setTimeout(actualizarDesdePlanilla, 600);
        };
      }

  async function actualizarDesdePlanilla(){
    const regs = await leerPlanilla();
    if(!regs.length){ showToast('No se pudo leer la planilla'); return; }
    dataById.clear();
    for(const r of regs){
      const fid = idKey(r.id);
      if(!fid) continue;
      const prev = dataById.get(fid);
      const dt = parseFecha(r.fecha) || new Date(0);
      const prevDt = prev ? (parseFecha(prev.fecha) || new Date(0)) : new Date(0);
      if(!prev || dt >= prevDt) dataById.set(fid, r);
    }
    for(const p of poligonos){
      const rec = dataById.get(idKey(p.id));
      if(!rec) continue;
      p.capitan = rec.capitan || p.capitan || '';
      p.territorio = rec.territorio || p.territorio || p.id;
      p.finalizado = normalizarFinalizado(rec.finalizado || rec.estado || p.finalizado);
      const df = parseFecha(rec.fecha);
      p.fecha = df || p.fecha;
      p.comentario = rec.comentario || p.comentario || '';
      repintarUno(p);
    }
    showToast('Planilla aplicada');
  }

      // ====== Modal & Form ======
  function ensureUI(){
    const overlay = document.getElementById('territorio-overlay');
    const _ov = document.getElementById('territorio-overlay');
    _ov.style.display = 'flex';
    _ov.style.zIndex = String(1e6);
    if(!overlay) return;
    const closeBtn = document.getElementById('territorio-close');
    if(closeBtn) closeBtn.onclick = ()=> overlay.style.display='none';
    overlay.addEventListener('click',(e)=>{ if(e.target===overlay) overlay.style.display='none'; });
  }
  function showModal(html, title){
    ensureUI();
    console.log("showModal");
    document.getElementById('territorio-title').textContent = title || 'Registrar territorio';
    document.getElementById('territorio-body').innerHTML = html;
    document.getElementById('territorio-overlay').style.display='flex';
  }
  function hideModal(){ const o=document.getElementById('territorio-overlay'); if(o) o.style.display='none'; }

  function formHTML(id, valores={}){
    const { capitan='', estado='Si', fechaValida=new Date(), comentario='' } = valores;
    const fechaInput = fmtDateInput(fechaValida);
    return `
      <form class="form-territorio" id="form-territorio-${id}" style="font-family:system-ui,Segoe UI,Roboto,Arial">
        <div class="row" style="margin-bottom:10px">
          <label for="cap-${id}" style="display:block;margin-bottom:4px;font-weight:600;color:#333">Capit치n</label>
          <input id="cap-${id}" value="${capitan || ''}" placeholder="Nombre del capit치n"
                 style="width:100%;padding:8px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;box-sizing:border-box"/>
        </div>
        <div class="row" style="margin-bottom:10px">
          <label for="fec-${id}" style="display:block;margin-bottom:4px;font-weight:600;color:#333">Fecha</label>
          <input id="fec-${id}" type="date" value="${fechaInput}"
                 style="width:100%;padding:8px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;box-sizing:border-box"/>
        </div>
        <div class="row" style="margin-bottom:10px">
          <label for="est-${id}" style="display:block;margin-bottom:4px;font-weight:600;color:#333">쮽inaliz칩?</label>
          <select id="est-${id}" style="width:100%;padding:8px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;box-sizing:border-box">
            <option ${estado==='Si'?'selected':''} value="Si">Si</option>
            <option ${estado==='No'?'selected':''} value="No">No</option>
          </select>
        </div>
        <div class="row" style="margin-bottom:10px">
          <label for="com-${id}" style="display:block;margin-bottom:4px;font-weight:600;color:#333">Comentario</label>
          <textarea id="com-${id}" placeholder="Observaciones..." style="width:100%;padding:8px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;min-height:68px;resize:vertical;box-sizing:border-box"></textarea>
        </div>
        <div class="actions" style="display:flex;gap:8px;justify-content:flex-end">
          <button type="button" class="btn btn-cancelar" id="cancel-${id}" style="border:none;border-radius:8px;padding:8px 12px;font-weight:700;cursor:pointer;background:#e5e7eb;color:#111">Cancelar</button>
          <button type="button" class="btn btn-guardar" id="save-${id}" style="border:none;border-radius:8px;padding:8px 12px;font-weight:700;cursor:pointer;background:#2e7d32;color:#fff">Guardar</button>
        </div>
      </form>
    `;
  }

  function fmtDateInput(d){
    if(!(d instanceof Date) || isNaN(d)) d = new Date();
    const y=d.getFullYear(), m=String(d.getMonth()+1).padStart(2,'0'), day=String(d.getDate()).padStart(2,'0');
    return `${y}-${m}-${day}`;
  }

  function showToast(msg){
    const t = document.getElementById("territorio-toast");
    t.textContent = msg || "";
    t.style.display = msg ? "block" : "none";
    if(msg){ clearTimeout(showToast._t); showToast._t = setTimeout(()=>t.style.display="none", 4000); }
  }

  function repintarUno(p){
    const key = colorKeyPorFechaEstado(p);
    const lyr = layerById.get(String(p.id));
    if(lyr) lyr.setStyle( estiloPorKey(key) );
    contadores = { blue:0, green:0, yellow:0, red:0 };
    for(const pol of poligonos){
      const k = colorKeyPorFechaEstado(pol);
      contadores[k] = (contadores[k]||0)+1;
    }
    repintarContadores();
    // actualizar panel informativo si existe
    const spanId = document.getElementById('polygon-id');
    const spanFecha = document.getElementById('polygon-fecha');
    if(spanId && spanFecha && p){
      spanId.textContent = p.id;
      spanFecha.textContent = p.fecha instanceof Date && !isNaN(p.fecha) ? fmtDateInput(p.fecha) : '';
    }
  }

    function diferenciaEnMeses(a,b){
    if(!(a instanceof Date) || isNaN(a)) return Infinity;
    let m = (b.getFullYear()-a.getFullYear())*12 + (b.getMonth()-a.getMonth());
    if(b.getDate() < a.getDate()) m -= 1;
    return m;
  }
  function colorKeyPorFechaEstado(p){
    const fechaValida = p.fecha instanceof Date && !isNaN(p.fecha);
    if(!fechaValida) return 'gray'; // sin datos -> gris
    const diffMeses = diferenciaEnMeses(p.fecha, new Date());
    if(diffMeses < 2) return p.finalizado === 'Si' ? 'green' : 'blue';
    if(diffMeses <= 3) return 'yellow';
    return 'red';
  }

  async function leerPlanilla(){
    if(READ_CSV_URL){
      try{
        const r = await fetch(READ_CSV_URL, { cache:'no-store' });
        const txt = await r.text();
        const lines = txt.split(/\r?\n/).filter(Boolean);
        if(!lines.length) return [];
        const header = lines[0].split(',').map(h=>h.trim().toLowerCase());
        const out = [];
        for(let i=1;i<lines.length;i++){
          const cols = lines[i].split(',');
          const o = {};
          cols.forEach((v,idx)=> o[header[idx] || ('col'+idx)] = (v ?? '').trim());
          out.push(o);
        }
        return out.map(o => ({
          id: o.id ?? o['territorio'] ?? '',
          fecha: o.fecha ?? o['date'] ?? '',
          finalizado: o.finalizado ?? o['estado'] ?? '',
          capitan: o.capitan ?? '',
          comentario: o.comentario ?? o['obs'] ?? '',
          territorio: o.territorio ?? ''
        }));
      }catch(e){ console.warn('Fallo CSV', e); }
    }
    try{
      const r = await fetch(WEBHOOK_URL + '?list=1', { cache:'no-store' });
      const data = await r.json();
      if(Array.isArray(data)) return data;
    }catch(e){ console.warn('Fallo ?list=1', e); }
    return [];
  }

  async function enviarAlSheet(rec){
    try{
      const body = new URLSearchParams({ payload: JSON.stringify(rec) });
      const r = await fetch(WEBHOOK_URL, { method:'POST', headers:{'Content-Type':'application/x-www-form-urlencoded;charset=utf-8'}, body });
      const text = await r.text().catch(()=>'');
      if(r.ok && /"ok"\s*:\s*true/.test(text)) return { ok:true, via:'POST' };
      if(r.status===405) throw new Error('405');
      throw new Error(text || ('HTTP '+r.status));
    }catch(err){
      try{
        const url = WEBHOOK_URL + '?' + new URLSearchParams({ payload: JSON.stringify(rec) });
        await fetch(url, { method:'GET', mode:'no-cors' });
        return { ok:true, via:'GET-no-cors' };
      }catch(e2){
        return { ok:false, reason:String(e2) };
      }
    }
  }

/*async function enviarAlSheet(rec){
  //if (!AUTH.isLoggedIn()) return { ok:false, reason:'No autenticado' };
  try{
    const body = new URLSearchParams();
    body.set('action', 'save');
//    body.set('token', AUTH.token);
    body.set('rec', JSON.stringify(rec));

    const r = await fetch(WEBHOOK_URL, {
      method:'POST',
      headers:{ 'Content-Type':'application/x-www-form-urlencoded;charset=utf-8' },
      body
    });
    const data = await r.json().catch(()=>({}));
    if (r.ok && data.ok) return { ok:true, via:'POST' };
    throw new Error(data.error || ('HTTP '+r.status));
  }catch(e){
    return { ok:false, reason:String(e) };
  }
}*/

      /*************** RANKING (SIN HACER, M츼S ANTIGUOS) ***************/
      async function mostrarRanking() {
        try {
          const datosSheets = await cargarDatosDesdeSheets();
          if (!Array.isArray(datosSheets) || datosSheets.length === 0) {
            document.getElementById("ranking-container").innerHTML =
              "<h3>Territorios sin hacer</h3><p>No se pudieron cargar datos.</p>";
            return;
          }

          // Finalizado != 'Si'
          const sinHacer = datosSheets.filter(
            (d) => String(d.finalizado).toLowerCase() !== "si"
          );

          // Ordenar por fecha (m치s antigua primero)
          sinHacer.sort((a, b) => a.fecha - b.fecha);

          const lista = sinHacer.slice(0, N_RANK);

          let html = "<h3>Territorios sin hacer</h3><ul>";
          const hoy = new Date();
          for (const d of lista) {
            const fechaTxt =
              d.fecha instanceof Date && !isNaN(d.fecha)
                ? d.fecha.toLocaleDateString()
                : "-";
            const meses =
              d.fecha instanceof Date && !isNaN(d.fecha)
                ? diferenciaEnMeses(d.fecha, hoy)
                : "?";
            html += `<li>${d.id} - ${fechaTxt} (${meses} mes${
              meses === 1 ? "" : "es"
            })</li>`;
          }
          html += "</ul>";

          document.getElementById("ranking-container").innerHTML = html;
        } catch (e) {
          console.error(e);
          document.getElementById("ranking-container").innerHTML =
            "<h3>Territorios sin hacer</h3><p>Error al cargar datos.</p>";
        }
      }

      /*************** INIT ***************/
      //mostrarRanking();
      cargarMapa();

      // (Opcional) refrescar cada 5 minutos:
      // setInterval(() => { mostrarRanking(); /* y si quer칠s: recargar mapa */ }, 5 * 60 * 1000);

         document.addEventListener("DOMContentLoaded", function () {
        const btn = document.getElementById("toggle-referencias");
        const paneles = [
          document.getElementById("referencias"),
          document.getElementById("ranking-container"),
          document.getElementById("contador-poligonos"),
          document.getElementById("info-panel"),
        ];

        let visible = false;

        btn.addEventListener("click", function () {
          // Animaci칩n de escala
          btn.classList.add("animate");
          setTimeout(() => btn.classList.remove("animate"), 200); // Dura lo mismo que el @keyframes

          // Mostrar u ocultar paneles
          visible = !visible;
          paneles.forEach((panel) => {
            if (panel) {
              panel.style.display = visible ? "block" : "none";
            }
          });

          // Cambiar texto del bot칩n
          btn.textContent = visible
            ? "仇 Ocultar Informaci칩n"
            : "游늶 Ver Informaci칩n";
        });
      });
    </script>
  
<!-- UI Modal para formulario de territorio + bot칩n Actualizar -->
<div id="territorio-overlay" style="display:none;align-items:center;justify-content:center;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:10000">
  <div id="territorio-modal" role="dialog" aria-modal="true" style="width:min(440px,92vw);background:#fff;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,.35);overflow:hidden;font-family:system-ui,Segoe UI,Roboto,Arial">
    <header style="background:#111827;color:#fff;padding:10px 12px;display:flex;justify-content:space-between;align-items:center">
      <h3 id="territorio-title" style="margin:0;font-size:14px">Registrar territorio</h3>
      <!--button type="button" id="territorio-close" class="btn btn-cancelar" style="border:none;border-radius:8px;padding:6px 10px;font-weight:700;cursor:pointer;background:#e5e7eb;color:#111">Cerrar</button-->
    </header>
    <div id="territorio-body" class="content" style="padding:12px;font-size:14px"></div>
  </div>
</div>
<div id="territorio-toast" style="position:fixed;left:12px;bottom:12px;background:rgba(255,255,255,.95);padding:6px 10px;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,.15);font-size:12px;display:none;z-index:10001"></div>
<button id="btn-actualizar-sheet" title="Leer planilla y repintar" style="position:fixed;right:12px;top:12px;z-index:1200;background:#2563eb;color:#fff;border:none;padding:8px 10px;border-radius:8px;font-weight:700;cursor:pointer;visibility:hidden;">Actualizar</button>
<div id="login-overlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:100000;align-items:center;justify-content:center">
  <div style="width:min(420px,92vw);background:#fff;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,.35);overflow:hidden;font-family:system-ui,Segoe UI,Roboto,Arial">
    <header style="background:#111827;color:#fff;padding:10px 12px">
      <h3 style="margin:0;font-size:14px">Iniciar sesi칩n</h3>
    </header>
    <div style="padding:12px">
      <label style="display:block;margin:6px 0 4px">Usuario</label>
      <input id="login-user" style="width:100%;padding:8px;border:1px solid #d1d5db;border-radius:8px"/>
      <label style="display:block;margin:10px 0 4px">Contrase침a</label>
      <input id="login-pass" type="password" style="width:100%;padding:8px;border:1px solid #d1d5db;border-radius:8px"/>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button id="login-cancel" style="border:none;border-radius:8px;padding:8px 12px;background:#e5e7eb;cursor:pointer">Cancelar</button>
        <button id="login-ok" style="border:none;border-radius:8px;padding:8px 12px;background:#2563eb;color:#fff;cursor:pointer">Entrar</button>
      </div>
    </div>
  </div>
</div>

<script>
  function openLoginModal(onSubmit){
    const ov = document.getElementById('login-overlay');
    const user = document.getElementById('login-user');
    const pass = document.getElementById('login-pass');
    const ok   = document.getElementById('login-ok');
    const cc   = document.getElementById('login-cancel');
    ov.style.display = 'flex';
    user.value = ''; pass.value = ''; user.focus();

    const close = ()=> { ov.style.display = 'none'; ok.onclick = cc.onclick = null; };
    cc.onclick = close;
    ok.onclick = ()=> onSubmit({ usuario: user.value, password: pass.value, close });
    ov.addEventListener('click', (e)=>{ if(e.target===ov) close(); }, { once:true });
  }

(function(){
  // ====== CONFIG ======
  const WEBHOOK_URL = "https://script.google.com/macros/s/AKfycbweVDu_2Vn0ygEMQdkgqbVprTKJ2kjAT--Wimo0cVTaASLK3-yJMkt175DJq-pky1Y/exec";
  const READ_CSV_URL = (typeof SHEET_CSV !== "undefined" && SHEET_CSV) ? SHEET_CSV : "";
  if (typeof map === 'undefined') { console.error('No existe el mapa Leaflet "map".'); return; }
  if (typeof poligonos === 'undefined') { window.poligonos = []; }

  // ====== Estado ======
  const territoriosLayer = L.featureGroup().addTo(map);
  const layerById = new Map();
  const dataById  = new Map();
  let contadores = { blue:0, green:0, yellow:0, red:0 };

  // ====== Helpers ======
function normalizarId(x) {
  let s = String(x ?? "")
    .normalize("NFKC")
    // quita espacios invisibles (ZWSP, etc.)
    .replace(/[\u200B\u200C\u200D\u2060\uFEFF]/g, "")
    // convierte todos los espacios unicode a espacio com칰n y colapsa
    .replace(/[\u00A0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/g, " ")
    .replace(/\s+/g, " ")
    .trim();

  if (!s) return "";

  // si quer칠s mantener ceros a la izquierda, cambi치 por: const stripZeros = v => v;
  const stripZeros = (v) => v.replace(/^0+/, "") || "0";

  // 1) Solo d칤gitos
  if (/^\d+$/.test(s)) return stripZeros(s);

  // 2) Prioridad: 칰ltimos d칤gitos al final del string (cubre "705|6 301"  "301", "12|34"  "34")
  let m = s.match(/(\d+)\s*$/);
  if (m) return stripZeros(m[1]);

  // 3) Caso "AA|BB" (sin n칰meros al final)  d칤gitos a la derecha de la 칰ltima barra
  if (s.includes("|")) {
    const right = s.split("|").pop();
    m = right.match(/(\d+)(?!.*\d)/);
    if (m) return stripZeros(m[1]);
  }

  // 4) Fallback: 칰ltimo grupo num칠rico donde sea
  const all = s.match(/\d+/g);
  if (all && all.length) return stripZeros(all[all.length - 1]);

  return s; // sin n칰meros, devolvemos original
}


  const $ = (sel)=> document.querySelector(sel);
  function idKey(x){ return String(x ?? "").split("|")[0].trim(); }
  function parseFecha(s){
    if(!s) return null;
    const t = String(s).trim();
    const d1 = new Date(t); if(!isNaN(d1)) return d1;
    const m = t.match(/^([0-3]?\d)[\/\-]([0-1]?\d)[\/\-](\d{4})$/);
    if(m){ const [_,dd,mm,yy]=m; return new Date(parseInt(yy), parseInt(mm)-1, parseInt(dd)); }
    const m2 = t.match(/^(\d{4})[\/\-]([0-1]?\d)[\/\-]([0-3]?\d)$/);
    if(m2){ const [_,yy,mm,dd]=m2; return new Date(parseInt(yy), parseInt(mm)-1, parseInt(dd)); }
    return null;
  }
  function normalizarFinalizado(v){
    const s = String(v ?? '').trim().toLowerCase();
    if(!s) return '';
    if(['si','s칤','s','true','1','ok','finalizado','completo','terminado'].includes(s)) return 'Si';
    if(['no','n','false','0','pendiente','incompleto','en curso','trabajando'].includes(s)) return 'No';
    return s;
  }

function estiloPorKey(key){
  const base = { color:'#333', weight:1, fillOpacity:0.35 };
  if(key==='blue')   return { ...base, fillColor:'#3388ff' };
  if(key==='green')  return { ...base, fillColor:'#2e7d32' };
  if(key==='yellow') return { ...base, fillColor:'#ffd500' };
  if(key==='red')    return { ...base, fillColor:'#b53a22' };
  if(key==='gray')   return { ...base, fillColor:'#9e9e9e' }; //  NUEVO
  return { ...base, fillColor:'#90caf9' };
}


  


  // ====== Pintado ======
function bindLayerEvents(layer, p){
  // Solo click -> abrir formulario. NO tooltip aqu칤 para evitar ID duplicado.
  layer.on('click', (e) => {
    try { if (e && e.originalEvent) L.DomEvent.stop(e.originalEvent); } catch (_) {}
    abrirForm(p);
  });
}


  function drawPoligonos(){
    territoriosLayer.clearLayers();
    layerById.clear();
    contadores = { blue:0, green:0, yellow:0, red:0 };

    (poligonos||[]).forEach(p => {
      p.finalizado = normalizarFinalizado(p.finalizado);
      if(p.fecha && !(p.fecha instanceof Date)){ const df = parseFecha(p.fecha); p.fecha = df || null; }
      const key = colorKeyPorFechaEstado(p);
      const layer = L.polygon(p.coords, estiloPorKey(key));
      bindLayerEvents(layer, p);
      layer.addTo(territoriosLayer);
      layerById.set(String(p.id), layer);
      contadores[key] = (contadores[key]||0)+1;
    });
    try{ map.fitBounds(territoriosLayer.getBounds(), { padding:[20,20] }); }catch(_){}
    repintarContadores();
  }

  // ====== Lectura planilla ======
  


  // ====== Init ======
  document.getElementById('btn-actualizar-sheet').addEventListener('click', actualizarDesdePlanilla);
  drawPoligonos();
})();
</script>

</body>
</html>
